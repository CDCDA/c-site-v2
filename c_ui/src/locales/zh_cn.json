{
  "事件名": "事件名",
  "事件处理函数": "事件处理函数",
  "布尔值": "布尔值",
  "订阅数据": "订阅数据",
  "个人资料": "个人资料",
  "博客管理": "博客管理",
  "分类管理": "分类管理",
  "我的收藏": "我的收藏",
  "测试": "测试",
  "歌单": "歌单",
  "师父": "师父",
  "王朝1982,卦者灵风,朱旭BooBoo": "王朝1982,卦者灵风,朱旭BooBoo",
  "有意思的歌": "有意思的歌",
  "已经到最后一首了": "已经到最后一首了",
  "已经到第一首了": "已经到第一首了",
  "喝一壶清茶，写几行小篆，": "喝一壶清茶，写几行小篆，",
  "闲情逸致": "闲情逸致",
  "仅展示最近20条": "仅展示最近20条",
  "施工中...": "施工中...",
  "评论": "评论",
  "随笔内容": "随笔内容",
  "写点什么吧。。。": "写点什么吧。。。",
  "随笔图片": "随笔图片",
  "常用标签": "常用标签",
  "博客标签": "博客标签",
  "发布时间": "发布时间",
  "保存": "保存",
  "发布": "发布",
  "游戏": "游戏",
  "吐槽": "吐槽",
  "分享": "分享",
  "生活": "生活",
  "音乐": "音乐",
  "电影": "电影",
  "开发": "开发",
  "请输入随笔内容": "请输入随笔内容",
  "别发个空随笔": "别发个空随笔",
  "随笔发布成功": "随笔发布成功",
  "点击前往随笔": "点击前往随笔",
  "保存成功": "保存成功",
  "装备": "装备",
  "科技是第一生产力": "科技是第一生产力",
  "但是穷": "但是穷",
  "相册集": "相册集",
  "唯有记忆，才是最完美的影像。": "唯有记忆，才是最完美的影像。",
  "历历在目": "历历在目",
  "单机游戏": "单机游戏",
  "我不知道我是谁，不知道我在哪，我只知道我要大开杀戒了": "我不知道我是谁，不知道我在哪，我只知道我要大开杀戒了",
  "手机游戏": "手机游戏",
  "打发时间，不过现在已经不玩了": "打发时间，不过现在已经不玩了",
  "目标": "目标",
  "体重": "体重",
  "体脂": "体脂",
  "单次不间断跑步距离": "单次不间断跑步距离",
  "健身": "健身",
  "还是先锻炼起来再说吧": "还是先锻炼起来再说吧",
  "不管怎么说，再小的力量也是力量": "不管怎么说，再小的力量也是力量",
  "好难减啊": "好难减啊",
  "跪姿俯卧撑": "跪姿俯卧撑",
  "12个": "12个",
  "1轮": "1轮",
  "标准俯卧撑": "标准俯卧撑",
  "哑铃卧推(4个动作)": "哑铃卧推(4个动作)",
  "3轮": "3轮",
  "腹肌撕裂者": "腹肌撕裂者",
  "躺平": "躺平",
  "放纵餐": "放纵餐",
  "1顿": "1顿",
  "星期一": "星期一",
  "胸": "胸",
  "星期二": "星期二",
  "腹": "腹",
  "星期三": "星期三",
  "星期四": "星期四",
  "星期五": "星期五",
  "星期六": "星期六",
  "星期天": "星期天",
  "躺": "躺",
  "没什么电影看啊": "没什么电影看啊",
  "电视剧": "电视剧",
  "没什么电视剧看啊": "没什么电视剧看啊",
  "动漫": "动漫",
  "没什么动漫看啊": "没什么动漫看啊",
  "壁纸名称": "壁纸名称",
  "分类": "分类",
  "序号": "序号",
  "封面": "封面",
  "类型": "类型",
  "创建时间": "创建时间",
  "修改时间": "修改时间",
  "操作": "操作",
  "编辑": "编辑",
  "删除": "删除",
  "添加壁纸": "添加壁纸",
  "编辑壁纸": "编辑壁纸",
  "壁纸类型": "壁纸类型",
  "静态壁纸": "静态壁纸",
  "动态壁纸": "动态壁纸",
  "纯色壁纸": "纯色壁纸",
  "壁纸路径": "壁纸路径",
  "请输入壁纸URL或颜色值": "请输入壁纸URL或颜色值",
  "取消": "取消",
  "确定": "确定",
  "请输入壁纸名称": "请输入壁纸名称",
  "请输入壁纸路径": "请输入壁纸路径",
  "请选择壁纸类型": "请选择壁纸类型",
  "请上传视频封面": "请上传视频封面",
  "新增成功": "新增成功",
  "修改成功": "修改成功",
  "分类名称": "分类名称",
  "简介": "简介",
  "备注": "备注",
  "添加分类": "添加分类",
  "编辑分类": "编辑分类",
  "请输入分类名称": "请输入分类名称",
  "分类简介": "分类简介",
  "请输入分类简介": "请输入分类简介",
  "封面图片": "封面图片",
  "长度在 1 到 50 个字符": "长度在 1 到 50 个字符",
  "长度在 1 到 100 个字符": "长度在 1 到 100 个字符",
  "标签名称": "标签名称",
  "关联文章数": "关联文章数",
  "添加标签": "添加标签",
  "编辑标签": "编辑标签",
  "名称": "名称",
  "写点什么吧~(￣▽￣)~*": "写点什么吧~(￣▽￣)~*",
  "请输入标签名称": "请输入标签名称",
  "请上传封面": "请上传封面",
  "入站时间": "入站时间",
  "昵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;称": "昵&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;称",
  "账&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;号": "账&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;号",
  "联系电话": "联系电话",
  "邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箱": "邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箱",
  "性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别": "性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别",
  "个人简介": "个人简介",
  "男": "男",
  "女": "女",
  "待处理项": "待处理项",
  "待处理项1": "待处理项1",
  "待处理项1的值": "待处理项1的值",
  "待处理项2": "待处理项2",
  "待处理项2的值": "待处理项2的值",
  "更新内容": "更新内容",
  "更新时间": "更新时间",
  "新增更新日志": "新增更新日志",
  "编辑更新日志": "编辑更新日志",
  "请输入更新内容...": "请输入更新内容...",
  "请选择": "请选择",
  "请输入更新内容": "请输入更新内容",
  "请选择更新时间": "请选择更新时间",
  "美食名": "美食名",
  "添加美食": "添加美食",
  "编辑美食": "编辑美食",
  "请输入图片URL": "请输入图片URL",
  "做法": "做法",
  "请输入做法链接或描述": "请输入做法链接或描述",
  "网络图片": "网络图片",
  "本地上传": "本地上传",
  "请输入美食名称": "请输入美食名称",
  "请上传封面或输入图片URL": "请上传封面或输入图片URL",
  "游戏名称": "游戏名称",
  "游戏名": "游戏名",
  "官网": "官网",
  "评分": "评分",
  "添加游戏": "添加游戏",
  "编辑游戏": "编辑游戏",
  "单机": "单机",
  "手游": "手游",
  "请输入游戏名称": "请输入游戏名称",
  "请选择分类": "请选择分类",
  "请输入评分": "请输入评分",
  "内容": "内容",
  "影视名称": "影视名称",
  "请输入影视名称": "请输入影视名称",
  "添加影视": "添加影视",
  "编辑影视": "编辑影视",
  "播放地址": "播放地址",
  "请输入播放地址": "请输入播放地址",
  "字典名称": "字典名称",
  "请输入字典名称": "请输入字典名称",
  "状态": "状态",
  "字典类型": "字典类型",
  "新增字典": "新增字典",
  "编辑字典": "编辑字典",
  "请输入字典类型": "请输入字典类型",
  "正常": "正常",
  "停用": "停用",
  "字典标签": "字典标签",
  "请输入字典标签": "请输入字典标签",
  "字典键值": "字典键值",
  "排序": "排序",
  "新增字典数据": "新增字典数据",
  "编辑字典数据": "编辑字典数据",
  "回显样式": "回显样式",
  "显示顺序": "显示顺序",
  "请选择回显样式": "请选择回显样式",
  "请输入字典键值": "请输入字典键值",
  "请选择状态": "请选择状态",
  "请输入字典排序": "请输入字典排序",
  "菜单": "菜单",
  "刷新": "刷新",
  "全屏": "全屏",
  "搜索栏": "搜索栏",
  "新增": "新增",
  "修改": "修改",
  "查看": "查看",
  "管理": "管理",
  "刷新页面": "刷新页面",
  "关闭当前": "关闭当前",
  "关闭其他": "关闭其他",
  "关闭左侧": "关闭左侧",
  "关闭右侧": "关闭右侧",
  "全部关闭": "全部关闭",
  "控制台": "控制台",
  "首页": "首页",
  "皮肤": "皮肤",
  "登出": "登出",
  "确定注销并退出系统吗？": "确定注销并退出系统吗？",
  "提示": "提示",
  "博客标题": "博客标题",
  "标签": "标签",
  "博客简介": "博客简介",
  "博客分类": "博客分类",
  "是否原创": "是否原创",
  "是否推荐": "是否推荐",
  "作者": "作者",
  "图片": "图片",
  "请输入相册名称": "请输入相册名称",
  "相册名称": "相册名称",
  "添加相册": "添加相册",
  "编辑相册": "编辑相册",
  "账号": "账号",
  "密码": "密码",
  "忘记密码?": "忘记密码?",
  "登录": "登录",
  "注册": "注册",
  "请输入账号密码": "请输入账号密码",
  "用户名/邮箱": "用户名/邮箱",
  "昵称": "昵称",
  "邮箱": "邮箱",
  "验证码": "验证码",
  "修改密码?": "修改密码?",
  "获取验证码": "获取验证码",
  "游客登录": "游客登录",
  "没有账号": "没有账号",
  "已有账号": "已有账号",
  "立即注册": "立即注册",
  "请输入账号/邮箱": "请输入账号/邮箱",
  "请输入密码": "请输入密码",
  "暂不开放注册": "暂不开放注册",
  "请输入昵称": "请输入昵称",
  "请输入邮箱": "请输入邮箱",
  "请输入验证码": "请输入验证码",
  "注册成功": "注册成功",
  "验证码发送成功,请注意查收": "验证码发送成功,请注意查收",
  "换肤": "换肤",
  "主题": "主题",
  "其他": "其他",
  "动态壁纸因为本身文件较大和服务器带宽的限制，所以可能会导致加载缓慢。": "动态壁纸因为本身文件较大和服务器带宽的限制，所以可能会导致加载缓慢。",
  "每次切换路由页面壁纸跟着切换": "每次切换路由页面壁纸跟着切换",
  "包含首页顶栏和首页打字机字体颜色": "包含首页顶栏和首页打字机字体颜色",
  "每个弹窗都有两种风格--常规颜色背景和透明磨砂背景，弹窗右上角的旋转按钮可以当次切换": "每个弹窗都有两种风格--常规颜色背景和透明磨砂背景，弹窗右上角的旋转按钮可以当次切换",
  "粒子效果(仅静态壁纸)": "粒子效果(仅静态壁纸)",
  "樱花特效": "樱花特效",
  "随机壁纸": "随机壁纸",
  "首页字体颜色": "首页字体颜色",
  "弹窗风格": "弹窗风格",
  "常规": "常规",
  "磨砂": "磨砂",
  "字体": "字体",
  "发布博客": "发布博客",
  "发布随笔": "发布随笔",
  "皮肤选择": "皮肤选择",
  "更多设置": "更多设置",
  "回到顶部": "回到顶部",
  "直达底部": "直达底部",
  "新增日志": "新增日志",
  "日志内容": "日志内容",
  "请输入更新日志": "请输入更新日志",
  "返回主页": "返回主页",
  "随机文章": "随机文章",
  "搜索": "搜索",
  "语言切换": "语言切换",
  "消息": "消息",
  "记录": "记录",
  "博客": "博客",
  "我的": "我的",
  "组件": "组件",
  "关于": "关于",
  "正在获取随机博客...": "正在获取随机博客...",
  "暂无消息": "暂无消息",
  "简体中文": "简体中文",
  "常用网站": "常用网站",
  "渐变色": "渐变色",
  "阿里图标库": "阿里图标库",
  "AI百晓生": "AI百晓生",
  "据意查句": "据意查句",
  "找到": "找到",
  "条结果": "条结果",
  "项目简介": "项目简介",
  "关联技术栈": "关联技术栈",
  "欢迎来到我的网站": "欢迎来到我的网站",
  "我叫CCCC": "我叫CCCC",
  "是一名全栈开发工程师": "是一名全栈开发工程师",
  "技术栈": "技术栈",
  "现居 福州": "现居 福州",
  "生于": "生于",
  "福州大学": "福州大学",
  "计算机科学与技术专业": "计算机科学与技术专业",
  "目前": "目前",
  "在职。。。": "在职。。。",
  "性格": "性格",
  "执政官": "执政官",
  "感觉不太准，但又有很多人喜欢玩这个": "感觉不太准，但又有很多人喜欢玩这个",
  "感兴趣的可以去玩玩": "感兴趣的可以去玩玩",
  "性格测试": "性格测试",
  "爱好": "爱好",
  "java进阶": "java进阶",
  "rust练习生": "rust练习生",
  "全栈开发工程师": "全栈开发工程师",
  "游戏爱好者": "游戏爱好者",
  "整点新活": "整点新活",
  "日常找新歌": "日常找新歌",
  "完成网站基础框架": "完成网站基础框架",
  "完成“博客”模块": "完成“博客”模块",
  "完成“其他”模块的3个页面": "完成“其他”模块的3个页面",
  "完成“我的”模块的4个页面": "完成“我的”模块的4个页面",
  "大体完成个人网站前端修改": "大体完成个人网站前端修改",
  "网站引用资源和数据都改到服务器": "网站引用资源和数据都改到服务器",
  "来逛逛吧": "来逛逛吧",
  "生活不只有眼前的苟且": "生活不只有眼前的苟且",
  "还有远方的苟且": "还有远方的苟且",
  "几年很快的": "几年很快的",
  "风一吹就没了": "风一吹就没了",
  "晴": "晴",
  "雨": "雨",
  "阴": "阴",
  "雪": "雪",
  "雷": "雷",
  "欢迎来自": "欢迎来自",
  "的小伙伴": "的小伙伴",
  "当前位置距离博主": "当前位置距离博主",
  "公里": "公里",
  "您的ip地址为": "您的ip地址为",
  "早起的虫子被鸟吃": "早起的虫子被鸟吃",
  "睡醒的第一件事就是重睡": "睡醒的第一件事就是重睡",
  "现在是超棒的晨间时间，如果你不在工作的话": "现在是超棒的晨间时间，如果你不在工作的话",
  "我先睡了": "我先睡了",
  "三点几了 饮茶先啦": "三点几了 饮茶先啦",
  "上班的等下班，上课等的下课": "上班的等下班，上课等的下课",
  "该吃饭了伙计": "该吃饭了伙计",
  "希望别熬夜，如果熬，建议通宵": "希望别熬夜，如果熬，建议通宵",
  "晚上好": "晚上好",
  "早上好": "早上好",
  "下午好": "下午好",
  "更多切片": "更多切片",
  "推荐文章": "推荐文章",
  "更多推荐": "更多推荐",
  "荐": "荐",
  "前端小记": "前端小记",
  "后端总结": "后端总结",
  "生活随笔": "生活随笔",
  "我的技术栈": "我的技术栈",
  "随便逛逛": "随便逛逛",
  "加了个滚动技术栈": "加了个滚动技术栈",
  "相册已完成": "相册已完成",
  "修整了一下首页": "修整了一下首页",
  "放假放假放假": "放假放假放假",
  "全部": "全部",
  "您正在寻找的页面可能已被删除或暂时不可用": "您正在寻找的页面可能已被删除或暂时不可用",
  "请尝试": "请尝试",
  "主页": "主页",
  "文章目录": "文章目录",
  "文章数": "文章数",
  "相册数": "相册数",
  "分类数": "分类数",
  "随笔数": "随笔数",
  "网站更新数": "网站更新数",
  "博客统计图": "博客统计图",
  "博客数": "博客数",
  "标签数": "标签数",
  "切片数": "切片数",
  "大模块数": "大模块数",
  "博客数量": "博客数量",
  "网站更新日志": "网站更新日志",
  "随笔数量": "随笔数量",
  "组件统计": "组件统计",
  "游戏影视统计": "游戏影视统计",
  "更新": "更新",
  "切片": "切片",
  "大模块": "大模块",
  "熬夜成仙吧": "熬夜成仙吧",
  "我是一名全栈开发工程师": "我是一名全栈开发工程师",
  "标签云": "标签云",
  "已经到第一篇了": "已经到第一篇了",
  "已经到最后一篇了": "已经到最后一篇了",
  "垂直水平居中方法汇总": "垂直水平居中方法汇总",
  "前端": "前端",
  "统计": "统计",
  "篇": "篇",
  "文章数：": "文章数：",
  "建站天数：": "建站天数：",
  "118天": "118天",
  "总结中": "总结中",
  "获取博客摘要失败，请重试": "获取博客摘要失败，请重试",
  "用一段尽量简短的话概括一下博客内容： ": "用一段尽量简短的话概括一下博客内容： ",
  "转载": "转载",
  "原创": "原创",
  "跳转中...": "跳转中...",
  "标题": "标题",
  "请输入标题": "请输入标题",
  "博客类型": "博客类型",
  "推荐": "推荐",
  "不推荐": "不推荐",
  "添加封面": "添加封面",
  "博客摘要": "博客摘要",
  "请输入...": "请输入...",
  "标签选择": "标签选择",
  "请输入博客标题": "请输入博客标题",
  "请选择博客分类": "请选择博客分类",
  "博客发布成功": "博客发布成功",
  "前往博客": "前往博客",
  "写新博客": "写新博客",
  "正在前往博客...": "正在前往博客...",
  "保存为草稿": "保存为草稿",
  "定时发布": "定时发布",
  "关于记录 为什么会有这个网站？": "关于记录 为什么会有这个网站？",
  "用户协议": "用户协议",
  "隐私政策": "隐私政策",
  "前言": "前言",
  "许多样式来源于网络，只不过是用我自己的方法区实现类似效果": "许多样式来源于网络，只不过是用我自己的方法区实现类似效果",
  "随缘更新，随缘记录": "随缘更新，随缘记录",
  "更新日志": "更新日志",
  "antvg6流程图": "antvg6流程图",
  "层级选择器": "层级选择器",
  "monaco编辑器": "monaco编辑器",
  "下拉树选择框": "下拉树选择框",
  "日期选择器": "日期选择器",
  "表单设计器": "表单设计器",
  "魔方": "魔方",
  "大模块测试": "大模块测试",
  "列1": "列1",
  "列2": "列2",
  "列3": "列3",
  "列4": "列4",
  "列5": "列5",
  "请输入行数": "请输入行数",
  "请输入列数": "请输入列数",
  "重置": "重置",
  "合并": "合并",
  "清空选择": "清空选择",
  "设计组件": "设计组件",
  "请至少选择2个单元格": "请至少选择2个单元格",
  "选中区域包含已合并单元格，请先取消合并": "选中区域包含已合并单元格，请先取消合并",
  "选中的单元格必须形成一个矩形区域": "选中的单元格必须形成一个矩形区域",
  "执行合并操作": "执行合并操作",
  "恢复初始位置": "恢复初始位置",
  "上移1px": "上移1px",
  "下移1px": "下移1px",
  "左移1px": "左移1px",
  "右移1px": "右移1px",
  "切换": "切换",
  "关闭对齐线": "关闭对齐线",
  "开启对齐线": "开启对齐线",
  "解锁": "解锁",
  "锁定": "锁定",
  "天气预报": "天气预报",
  "用户信息": "用户信息",
  "3d地球": "3d地球",
  "音乐播放器": "音乐播放器",
  "您的浏览器不支持音频播放": "您的浏览器不支持音频播放",
  "暂停": "暂停",
  "播放": "播放",
  "夜曲": "夜曲",
  "合同签订": "合同签订",
  "第一次付款": "第一次付款",
  "第二次付款": "第二次付款",
  "第三次付款": "第三次付款",
  "项目实施": "项目实施",
  "准备阶段": "准备阶段",
  "设计阶段": "设计阶段",
  "系统开发": "系统开发",
  "系统测试": "系统测试",
  "上线准备": "上线准备",
  "分组查询": "分组查询",
  "查询": "查询",
  "导入": "导入",
  "导出": "导出",
  "分组": "分组",
  "还原分组": "还原分组",
  "按工时排序": "按工时排序",
  "默认排序": "默认排序",
  "按计划数量排序": "按计划数量排序",
  "选择文件": "选择文件",
  "只能上传xlsx文件": "只能上传xlsx文件",
  "只读": "只读",
  "工时": "工时",
  "小时": "小时",
  "进度": "进度",
  "计划数量": "计划数量",
  "工段 A": "工段 A",
  "产线 A-1": "产线 A-1",
  "产线 A-2": "产线 A-2",
  "任务 A-2-1": "任务 A-2-1",
  "任务 A-2-2": "任务 A-2-2",
  "任务 A-2-3": "任务 A-2-3",
  "任务 A-2-4": "任务 A-2-4",
  "产线 A-3": "产线 A-3",
  "任务 A-3-1": "任务 A-3-1",
  "产线 A-4": "产线 A-4",
  "任务 A-4-1": "任务 A-4-1",
  "任务 A-4-2": "任务 A-4-2",
  "任务 A-4-3": "任务 A-4-3",
  "任务 A-4-4": "任务 A-4-4",
  "工段 B": "工段 B",
  "产线 B-1": "产线 B-1",
  "任务 B-1-1": "任务 B-1-1",
  "任务 B-1-2": "任务 B-1-2",
  "今天": "今天",
  "日": "日",
  "周": "周",
  "月": "月",
  "新建日程": "新建日程",
  "关闭": "关闭",
  "详细": "详细",
  "请确认是否撤销修改!": "请确认是否撤销修改!",
  "是否删除计划?": "是否删除计划?",
  "<template>\r\n  <div style=\"width: 100%; height: 100%\">\r\n    <el-form :model=\"queryParams\" :inline=\"true\">\r\n      <el-form-item :label=\"$t(分组查询)\">\r\n        <el-select v-model=\"queryParams.group\" clearable>\r\n          <el-option value=\"x\" label=\"x\"></el-option>\r\n          <el-option value=\"y\" label=\"y\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button @click=\"ganttFilter()\">{{ $t(查询) }}</el-button>\r\n        <el-button @click=\"handleImport()\">{{ $t(导入) }}</el-button>\r\n        <el-button @click=\"handleExport()\">{{ $t(导出) }}</el-button>\r\n        <el-button @click=\"handleGroup()\">{{ $t(分组) }}</el-button>\r\n        <el-button @click=\"handleResetGroup()\">{{ $t(还原分组) }}</el-button>\r\n        <el-button @click=\"sortByDuration()\">{{ $t(按工时排序) }}</el-button>\r\n        <el-button @click=\"sortDefault()\">{{ $t(默认排序) }}</el-button>\r\n        <!-- <el-button @click=\"sortByPlanQty()\">{{ $t(按计划数量排序) }}</el-button> -->\r\n        <el-button @click=\"handleReadOnly()\">{{\r\n          this.readOnly == false ? 只读 : 编辑\r\n        }}</el-button>\r\n        <el-button @click=\"submit()\">{{ $t(保存) }}</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div\r\n      id=\"gantt\"\r\n      style=\"width: 100%; height: calc(100% - 42px); border-radius: 8px; overflow: hidden\"\r\n    ></div>\r\n    <c-dialog :title=\"title\" v-model=\"open\" width=\"450\" :modal=\"true\">\r\n      <el-upload :http-request=\"loadExcel\" action=\" \" :limit=\"1\">\r\n        <el-button type=\"primary\">{{ $t(选择文件) }}</el-button>\r\n        <template #tip>\r\n          <div class=\"el-upload__tip\">{{ $t(只能上传xlsx文件) }}</div>\r\n        </template>\r\n      </el-upload>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"open = false\">{{ $t(取消) }}</el-button>\r\n        </span>\r\n      </template>\r\n    </c-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { gantt } from 'dhtmlx-gantt';\r\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\r\n\r\nvar params = { group: null };\r\nexport default {\r\n  name: 'gantt',\r\n  props: {\r\n    tasks: {\r\n      type: Object,\r\n      default() {\r\n        return { data: [], links: [] };\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      readOnly: false,\r\n      open: false,\r\n      queryParams: {\r\n        group: null\r\n      },\r\n      selectIds: [],\r\n      sourceTaskTop: null,\r\n      sourceId: null,\r\n      target: null,\r\n      targetParent: null,\r\n      columns: [\r\n        { name: 'text', label: 名称, tree: true, width: '200', align: 'center', resize: true },\r\n        {\r\n          name: 'duration',\r\n          label: 工时,\r\n          align: 'center',\r\n          template: function (obj) {\r\n            return obj.duration + 小时;\r\n          }\r\n        },\r\n        {\r\n          name: 'progress',\r\n          label: 进度,\r\n          align: 'center',\r\n          template: function (obj) {\r\n            return (obj.progress * 100).toFixed(2) + '%';\r\n          }\r\n        },\r\n        {\r\n          name: 'planQty',\r\n          label: 计划数量,\r\n          align: 'center',\r\n          template: function (obj) {\r\n            return obj.planQty;\r\n          }\r\n        }\r\n      ],\r\n      lightBoxSections: [\r\n        { name: 'description', height: 38, map_to: 'text', type: 'textarea', focus: true },\r\n        {\r\n          name: 'priority',\r\n          height: 22,\r\n          map_to: 'priority',\r\n          type: 'select',\r\n          options: [\r\n            { key: 1, label: 'High' },\r\n            { key: 2, label: 'Normal' },\r\n            { key: 3, label: 'Low' }\r\n          ]\r\n        },\r\n        { name: 'progress', type: 'textarea', map_to: 'progress', height: 20 },\r\n        { name: 'time', type: 'duration', map_to: 'auto' },\r\n        { name: 'planQty', type: 'textarea', map_to: 'planQty', height: 20 }\r\n      ],\r\n      ganttData: [\r\n        {\r\n          id: 11,\r\n          text: 工段 A, //名称\r\n          type: 'project', //类型\r\n          progress: 0.6, //进度\r\n          open: true, //是否展开\r\n          start_date: '02-04-2023 0 0:00', //时间\r\n          duration: 13, //工期\r\n          planQty: 60, //计划数量\r\n          group: 'y', //分组\r\n          parent: 0 //父级id\r\n        },\r\n        // {\r\n        //   id: 12,\r\n        //   text: '产线 A-1',\r\n        //   type: 'project',\r\n        //   start_date: '02-04-2023 0 0:00',\r\n        //   duration: 5,\r\n        //   parent: '11',\r\n        //   progress: 0.3,\r\n        //   planQty: 30,\r\n        //   group: 'y',\r\n        //   open: true\r\n        // },\r\n        {\r\n          id: 13,\r\n          text: '产线 A-2',\r\n          start_date: '02-04-2023 0 0:00',\r\n          type: 'project',\r\n          render: 'split',\r\n          parent: '11',\r\n          progress: 0.3,\r\n          planQty: 40,\r\n          group: 'y',\r\n          open: true,\r\n          duration: 5\r\n        },\r\n        {\r\n          id: 17,\r\n          text: '任务 A-2-1',\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 1,\r\n          group: 'y',\r\n          parent: '13',\r\n          progress: 0.2,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 18,\r\n          text: '任务 A-2-2',\r\n          start_date: '02-04-2023 01:00',\r\n          duration: 2,\r\n          parent: '13',\r\n          progress: 0.5,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 19,\r\n          text: '任务 A-2-3',\r\n          start_date: '02-04-2023 03:00',\r\n          duration: 1,\r\n          parent: '13',\r\n          progress: 0.9,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 20,\r\n          text: '任务 A-2-4',\r\n          start_date: '02-04-2023 04:00',\r\n          duration: 2,\r\n          parent: '13',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 14,\r\n          text: '产线 A-3',\r\n          type: 'project',\r\n          start_date: '02-04-2023 03:00',\r\n          duration: 6,\r\n          parent: '11',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true\r\n        },\r\n        {\r\n          id: 31,\r\n          text: '任务 A-3-1',\r\n          start_date: '02-04-2023 09:00',\r\n          duration: 1,\r\n          group: 'y',\r\n          parent: '14',\r\n          progress: 0.2,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 15,\r\n          text: '产线 A-4',\r\n          type: 'project',\r\n          render: 'split',\r\n          parent: '11',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true,\r\n          start_date: '02-04-2023 04:00',\r\n          duration: 11\r\n        },\r\n        {\r\n          id: 21,\r\n          text: '任务 A-4-1',\r\n          start_date: '02-04-2023 04:00',\r\n          duration: 4,\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true\r\n        },\r\n        {\r\n          id: 22,\r\n          text: '任务 A-4-2',\r\n          start_date: '02-04-2023 05:00',\r\n          duration: 3,\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true\r\n        },\r\n        {\r\n          id: 23,\r\n          text: '任务 A-4-3',\r\n          start_date: '02-04-2023 09:00',\r\n          duration: 3,\r\n          type: 'milestone',\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true,\r\n          duration: 2\r\n        },\r\n        {\r\n          id: 16,\r\n          text: '任务 A-4-4',\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 1,\r\n          type: 'milestone',\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true,\r\n          duration: 0\r\n        },\r\n        {\r\n          id: 101,\r\n          text: 工段 B,\r\n\r\n          type: 'project',\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 10,\r\n          planQty: 10,\r\n          group: 'x',\r\n          parent: 0\r\n        },\r\n        {\r\n          id: 102,\r\n          text: '产线 B-1',\r\n\r\n          type: 'project',\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 6,\r\n          planQty: 4,\r\n          group: 'x',\r\n          parent: 101\r\n        },\r\n        {\r\n          id: 103,\r\n          text: '任务 B-1-1',\r\n\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 2,\r\n          planQty: 4,\r\n          group: 'x',\r\n          parent: 102\r\n        },\r\n        {\r\n          id: 104,\r\n          text: '任务 B-1-2',\r\n\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 1,\r\n          planQty: 4,\r\n          group: 'x',\r\n          parent: 102\r\n        }\r\n      ],\r\n      ganttLinks: [\r\n        { id: '1', source: '17', target: '18', type: '0' },\r\n        { id: '2', source: '18', target: '19', type: '0' },\r\n        { id: '3', source: '19', target: '20', type: '0' },\r\n        { id: '4', source: '21', target: '22', type: '0' },\r\n        { id: '5', source: '22', target: '23', type: '0' }\r\n      ],\r\n      labels: {\r\n        planQty: 计划数量,\r\n        dhx_cal_today_button: 今天,\r\n        day_tab: 日,\r\n        week_tab: 周,\r\n        month_tab: 月,\r\n        new_event: 新建日程,\r\n        icon_save: 保存,\r\n        icon_cancel: 关闭,\r\n        icon_details: 详细,\r\n        icon_edit: 编辑,\r\n        icon_delete: 删除,\r\n        confirm_closing: 请确认是否撤销修改!, //Your changes will be lost, are your sure?\r\n        confirm_deleting: 是否删除计划?,\r\n        section_description: 描述:,\r\n        section_planQty: 计划数量:,\r\n        section_progress: 进度,\r\n        section_time: 时间范围:,\r\n        section_type: 类型:,\r\n        section_text: 计划名称:,\r\n        section_test: 测试:,\r\n        section_projectClass: 项目类型:,\r\n        taskProjectType_0: 项目任务,\r\n        taskProjectType_1: 普通任务,\r\n        section_head: 负责人:,\r\n        section_priority: 优先级:,\r\n        taskProgress: 任务状态,\r\n        taskProgress_0: 未开始,\r\n        taskProgress_1: 进行中,\r\n        taskProgress_2: 已完成,\r\n        taskProgress_3: 已延期,\r\n        taskProgress_4: 搁置中,\r\n        section_template: 'Details',\r\n        /* grid columns */\r\n        column_text: 计划名称,\r\n        column_start_date: 开始时间,\r\n        column_duration: 持续时间,\r\n        column_add: '',\r\n        column_priority: 难度,\r\n        /* link confirmation */\r\n        link: 关联,\r\n        confirm_link_deleting: 将被删除,\r\n        message_ok: 确定,\r\n        message_cancel: 取消,\r\n        link_start: ' (开始)',\r\n        link_end: ' (结束)',\r\n\r\n        type_task: 任务,\r\n        type_project: 项目,\r\n        type_milestone: 里程碑,\r\n        minutes: 分钟,\r\n        hours: 小时,\r\n        days: 天,\r\n        weeks: 周,\r\n        months: 月,\r\n        years: 年\r\n      },\r\n      tempGanttData: []\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    submit() {\r\n      console.log('AAA', gantt.getLinks());\r\n    },\r\n    //还原分组\r\n    handleResetGroup() {\r\n      if (this.tempGanttData.length != 0) {\r\n        gantt.clearAll();\r\n        this.ganttData = [];\r\n        this.tempGanttData.forEach(x => {\r\n          x.start_date = new Date(x.start_date);\r\n          x.end_date = new Date(x.end_date);\r\n          x.parent = x.sourceParent;\r\n          if (!x.isGroupSource) {\r\n            this.ganttData.push(x);\r\n          }\r\n        });\r\n        gantt.parse({ data: this.ganttData, links: this.ganttLinks });\r\n      }\r\n    },\r\n    //随机id\r\n    generateRandomId(length) {\r\n      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n      var id = '';\r\n      for (var i = 0; i < length; i++) {\r\n        id += characters.charAt(Math.floor(Math.random() * characters.length));\r\n      }\r\n      return id;\r\n    },\r\n    //分组\r\n    handleGroup() {\r\n      let groupSourceMap = new Map();\r\n      this.tempGanttData = [];\r\n      this.ganttData.forEach(x => {\r\n        if (!groupSourceMap.get(x.group)) {\r\n          groupSourceMap.set(x.group, {\r\n            id: this.generateRandomId(8),\r\n            text: x.group,\r\n            type: 'project',\r\n\r\n            progress: 0,\r\n            open: true,\r\n            start_date: x.start_date,\r\n            duration: 2,\r\n            parent: 0,\r\n            isGroupSource: true\r\n          });\r\n          this.tempGanttData.push(groupSourceMap.get(x.group));\r\n          x.sourceParent = x.parent;\r\n          x.parent = groupSourceMap.get(x.group).id;\r\n          this.tempGanttData.push(x);\r\n        } else {\r\n          x.sourceParent = x.parent;\r\n          x.parent = groupSourceMap.get(x.group).id;\r\n          this.tempGanttData.push(x);\r\n        }\r\n      });\r\n      gantt.clearAll();\r\n      gantt.parse({ data: this.tempGanttData, links: this.ganttLinks });\r\n    },\r\n    sortByDuration() {\r\n      this.tempGanttData = JSON.parse(JSON.stringify(this.ganttData));\r\n      gantt.sort('duration', true);\r\n    },\r\n    sortDefault() {\r\n      gantt.clearAll();\r\n      this.ganttData = [];\r\n      this.tempGanttData.forEach(x => {\r\n        x.start_date = new Date(x.start_date);\r\n        x.end_date = new Date(x.end_date);\r\n        this.ganttData.push(x);\r\n        // x.parent = x.sourceParent;\r\n        // if (!x.isGroupSource) {\r\n        //   this.ganttData.push(x);\r\n        // }\r\n      });\r\n      gantt.parse({ data: this.ganttData, links: this.ganttLinks });\r\n    },\r\n    sortByPlanQty() {\r\n      gantt.sort('planQty', true);\r\n    },\r\n    //只读\r\n    handleReadOnly() {\r\n      this.readOnly = !this.readOnly;\r\n      gantt.config.readonly = this.readOnly;\r\n    },\r\n    //导入excel\r\n    loadExcel(data) {\r\n      gantt.importFromExcel({\r\n        data: data.file,\r\n        callback: async function (project) {\r\n          if (project) {\r\n            await project.forEach(x => {\r\n              let ymdParts = x.start_date.split(' ')[0].split('-');\r\n              let hsParts = x.start_date.split(' ')[1].split(':');\r\n              x.start_date =\r\n                ymdParts[2] +\r\n                '-' +\r\n                ymdParts[1] +\r\n                '-' +\r\n                ymdParts[0] +\r\n                ' ' +\r\n                hsParts[0] +\r\n                ':' +\r\n                hsParts[1];\r\n            });\r\n            gantt.clearAll();\r\n            gantt.parse({ data: project });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    //打开导出弹窗\r\n    handleImport() {\r\n      this.open = true;\r\n    },\r\n    //导出excel\r\n    handleExport() {\r\n      console.log(this.ganttData);\r\n      gantt.exportToExcel({\r\n        name: `gantt_${new Date().getTime()}.xlsx`,\r\n        columns: [\r\n          { id: 'id', header: 'id', width: 25, type: 'number' },\r\n          { id: 'parent', header: 'parent', width: 25, type: 'number' },\r\n          { id: 'text', header: 'text', width: 25 },\r\n          { id: 'duration', header: 'duration', width: 25, type: 'number' },\r\n          { id: 'planQty', header: 'planQty', width: 25, type: 'number' },\r\n          { id: 'type', header: 'type', width: 25 },\r\n          { id: 'start_date', header: 'start_date', width: 25, type: 'date' }\r\n        ]\r\n      });\r\n    },\r\n    // 过滤\r\n    ganttFilter() {\r\n      params = this.queryParams;\r\n      gantt.refreshData();\r\n    },\r\n    //任务拆分\r\n    onDragEnd(startPoint, endPoint, startDate, endDate, tasksBetweenDates, tasksInRow) {\r\n      if (tasksInRow.length === 1) {\r\n        var currentTask = tasksInRow[0];\r\n        if (currentTask.type === 'project') {\r\n          currentTask.render = 'split';\r\n          gantt.addTask(\r\n            {\r\n              text: 'Subtask of ' + currentTask.text,\r\n              start_date: gantt.roundDate(startDate),\r\n              end_date: gantt.roundDate(endDate)\r\n            },\r\n            currentTask.id\r\n          );\r\n        } else {\r\n          let sourceStartDate = currentTask.start_date;\r\n          let sourceEndDate = currentTask.end_date;\r\n          let newStartDate = gantt.roundDate(startDate);\r\n          let newEndDate = gantt.roundDate(endDate);\r\n          let duration = 0;\r\n          if (sourceStartDate.getTime() <= newStartDate.getTime()) {\r\n            duration = gantt.calculateDuration({\r\n              start_date: sourceStartDate,\r\n              end_date: newStartDate\r\n            });\r\n            if (duration > 0) {\r\n              if (newEndDate.getTime() == sourceEndDate.getTime()) {\r\n                var nextTask = gantt.addTask(\r\n                  {\r\n                    text: currentTask.text + '-拆分任务',\r\n                    start_date: newStartDate,\r\n                    end_date: newEndDate\r\n                  },\r\n                  currentTask.parent\r\n                );\r\n                gantt.moveTask(nextTask, currentTask.$local_index + 1, currentTask.parent);\r\n                currentTask.end_date = newStartDate;\r\n              } else {\r\n                var preTask = gantt.addTask(\r\n                  {\r\n                    text: currentTask.text + '-拆分任务',\r\n                    start_date: sourceStartDate,\r\n                    end_date: newStartDate\r\n                  },\r\n                  currentTask.parent\r\n                );\r\n                gantt.moveTask(preTask, currentTask.$local_index, currentTask.parent);\r\n                let endDuration = gantt.calculateDuration({\r\n                  start_date: newEndDate,\r\n                  end_date: sourceEndDate\r\n                });\r\n                if (endDuration > 0) {\r\n                  var newTask = gantt.addTask(\r\n                    {\r\n                      text: currentTask.text + '-拆分任务',\r\n                      start_date: newStartDate,\r\n                      end_date: newEndDate\r\n                    },\r\n                    currentTask.parent\r\n                  );\r\n                  gantt.moveTask(newTask, currentTask.$local_index, currentTask.parent);\r\n                  currentTask.start_date = gantt.roundDate(endDate);\r\n                } else {\r\n                  currentTask.start_date = newStartDate;\r\n                }\r\n              }\r\n            } else if (duration == 0) {\r\n              var newTask = gantt.addTask(\r\n                {\r\n                  text: currentTask.text + '-拆分任务',\r\n                  start_date: newStartDate,\r\n                  end_date: newEndDate\r\n                },\r\n                currentTask.parent\r\n              );\r\n              gantt.moveTask(newTask, currentTask.$local_index, currentTask.parent);\r\n              currentTask.start_date = gantt.roundDate(endDate);\r\n            }\r\n          }\r\n          gantt.updateTask(currentTask.id);\r\n        }\r\n      } else if (tasksInRow.length === 0) {\r\n        gantt.createTask({\r\n          text: 'New task',\r\n          start_date: gantt.roundDate(startDate),\r\n          end_date: gantt.roundDate(endDate)\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  //将初始化方法移动到methods里也会报错\r\n  mounted() {\r\n    gantt.plugins({\r\n      click_drag: true,\r\n      multiselect: true,\r\n      undo: true,\r\n      export_api: true\r\n    });\r\n    gantt.config.order_branch = true; // 启用任务条垂直拖拽\r\n    gantt.config.drag_project = true; //整体拖拽\r\n    gantt.config.drag_move = true; // 允许任务条拖动\r\n    gantt.config.lightbox.sections = this.lightBoxSections; // 编辑弹窗设置\r\n    gantt.config.open_split_tasks = true; //通过单击 +/- 按钮启用展开/折叠拆分任务的可能性\r\n    gantt.config.multiselect = true; //多选\r\n    gantt.config.click_drag = {\r\n      callback: this.onDragEnd\r\n    };\r\n    gantt.config.date_format = '%d-%m-%Y %H:%i';\r\n    gantt.config.min_column_width = 20;\r\n    gantt.config.duration_unit = 'minute';\r\n    gantt.config.duration_step = 60;\r\n    gantt.config.scale_height = 75;\r\n    gantt.config.readonly = this.readOnly; //只读\r\n    gantt.locale.date = {\r\n      //时间显示修改\r\n      month_full: [\r\n        1月,\r\n        2月,\r\n        3月,\r\n        4月,\r\n        5月,\r\n        6月,\r\n        7月,\r\n        8月,\r\n        9月,\r\n        10月,\r\n        11月,\r\n        12月\r\n      ],\r\n      month_short: [\r\n        1月,\r\n        2月,\r\n        3月,\r\n        4月,\r\n        5月,\r\n        6月,\r\n        7月,\r\n        8月,\r\n        9月,\r\n        10月,\r\n        11月,\r\n        12月\r\n      ],\r\n      day_full: [星期日, 星期一, 星期二, 星期三, 星期四, 星期五, 星期六],\r\n      day_short: [星期日, 星期一, 星期二, 星期三, 星期四, 星期五, 星期六]\r\n    };\r\n    // gantt.config.date_format = '%Y-%m-%d %H:%i';\r\n    gantt.config.scales = [\r\n      { unit: 'hour', step: 1, format: '%g %a' },\r\n      { unit: 'day', step: 1, format: '%j %F, %l' },\r\n      { unit: 'minute', step: 10, format: '%i' }\r\n    ];\r\n    gantt.locale.labels = this.labels;\r\n    gantt.config.columns = this.columns;\r\n    // gantt.config.duration_unit = 'hour';\r\n    // gantt.config.duration_step = 1;\r\n    // gantt.config.scale_unit = 'hour'; //单元格时间单位\r\n    // gantt.config.step = 1; //单元格时间长度\r\n    // gantt.config.date_scale = '%H:%i'; // 设置日期格式为小时:分钟\r\n    // gantt.config.multiselect_one_level = true;\r\n    gantt.templates.task_class =\r\n      gantt.templates.grid_row_class =\r\n      gantt.templates.task_row_class =\r\n        function (start, end, task) {\r\n          if (gantt.isSelectedTask(task.id)) return 'gantt_selected';\r\n        };\r\n    //拖拽事件\r\n    gantt.attachEvent('onAfterTaskMove', async function (id, parent, tindex) {\r\n      this.target = tindex;\r\n      this.targetParent = parent;\r\n      this.sourceId = id;\r\n      // this.sourceTaskTop = gantt.getTaskTop(id);\r\n      return true;\r\n    });\r\n    //树状图任务拖拽结束事件（将方法单独放到metheds里会报错）\r\n    gantt.attachEvent('onRowDragEnd', function (id, parent, tindex) {\r\n      // console.log(\"数据\",this.ganttData)\r\n      let selectedTaskIds = this.selectIds;\r\n      function sortBroTask(sTask) {\r\n        let parentTask = gantt.getTask(gantt.getParent(sTask.id));\r\n        //排列同级兄弟的时间跨度\r\n        let broIds = gantt.getSiblings(sTask.id);\r\n        broIds.forEach((tId, i) => {\r\n          let task = gantt.getTask(tId);\r\n          if (i == 0) {\r\n            task.start_date = parentTask.start_date;\r\n          } else {\r\n            let preTask = gantt.getTask(broIds[i - 1]);\r\n            task.start_date = preTask.end_date;\r\n          }\r\n          task.end_date = gantt.calculateEndDate(task.start_date, task.duration);\r\n        });\r\n      }\r\n      //单选不执行多选事件\r\n      if (!selectedTaskIds || selectedTaskIds.length <= 1) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      if (!selectedTaskIds.find(x => x == id)) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      let sTask = gantt.getTask(selectedTaskIds[0]);\r\n      //不是第三级的批量拖拽，不执行\r\n      if (sTask.$level != 2) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      //本次拖拽是否在同一个父级任务下进行\r\n      let isSameParent = true;\r\n      let isSameLevel = true;\r\n      let level = null;\r\n      gantt.eachSelectedTask(id => {\r\n        let task = gantt.getTask(id);\r\n        if (task.parent != this.targetParent) {\r\n          isSameParent = false;\r\n        }\r\n        if (level == null) {\r\n          level = task.$level;\r\n        } else if (level != task.$level) {\r\n          isSameLevel = false;\r\n        }\r\n      });\r\n      //非同级多选不执行\r\n      if (!isSameLevel) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      // console.log(是否相同父级, isSameParent);\r\n      if (isSameParent) {\r\n        let sourceTask = gantt.getTask(id);\r\n        let index = null;\r\n        let afterLength = 0;\r\n        selectedTaskIds.forEach((nid, i) => {\r\n          if (nid == id) {\r\n            index = i;\r\n          }\r\n          let task = gantt.getTask(nid);\r\n          // console.log(任务, sourceTask.$local_index);\r\n          //该任务在当前任务之前\r\n          if (index == null || i < index) {\r\n            if (task.$local_index < sourceTask.$local_index) {\r\n              let targetIndex = sourceTask.$local_index - 1;\r\n              // console.log(任务前, targetIndex);\r\n              gantt.moveTask(nid, targetIndex, this.targetParent);\r\n            } else {\r\n              // console.log(任务前, sourceTask.$local_index);\r\n              gantt.moveTask(nid, sourceTask.$local_index, this.targetParent);\r\n            }\r\n          } else if (i > index) {\r\n            //该任务在当前任务之后\r\n\r\n            if (task.$local_index < sourceTask.$local_index) {\r\n              // console.log(任务前, sourceTask.$local_index + afterLength, afterLength);\r\n              gantt.moveTask(nid, sourceTask.$local_index + afterLength, this.targetParent);\r\n              afterLength++;\r\n            } else {\r\n              let targetIndex = sourceTask.$local_index + afterLength + 1;\r\n              // console.log(任务前, targetIndex, afterLength);\r\n              gantt.moveTask(nid, targetIndex, this.targetParent);\r\n              afterLength++;\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        //修改拖拽插入的任务顺序;\r\n        sTask = JSON.parse(JSON.stringify(sTask));\r\n        selectedTaskIds.forEach((nid, i) => {\r\n          let task = gantt.getTask(nid);\r\n          if (i !== 0) {\r\n            task.$local_index = sTask.$local_index + i;\r\n            gantt.moveTask(nid, task.$local_index, this.targetParent);\r\n          }\r\n        });\r\n      }\r\n\r\n      sortBroTask(sTask);\r\n      // let finalTasks = [];\r\n      // gantt.eachTask(function (task) {\r\n      //   finalTasks.push(task);\r\n      // }, this.targetParent);\r\n      // console.log(最终任务排序, finalTasks);\r\n\r\n      return true;\r\n    });\r\n    //弹窗保存事件\r\n    gantt.attachEvent('onLightboxSave', function (id, task, is_new) {\r\n      return true;\r\n    });\r\n    //多选选中事件\r\n    gantt.attachEvent('onTaskMultiSelect', function (id, state, e) {\r\n      if (!this.selectIds) {\r\n        this.selectIds = [];\r\n      }\r\n      if (state) {\r\n        this.selectIds.push(id);\r\n      } else {\r\n        this.selectIds.splice(this.selectIds.indexOf(id), 1);\r\n      }\r\n      return true;\r\n    });\r\n    //过滤事件\r\n    function hasGroup(parent, group) {\r\n      if (gantt.getTask(parent).group == group) return true;\r\n\r\n      var child = gantt.getChildren(parent);\r\n      for (var i = 0; i < child.length; i++) {\r\n        if (hasGroup(child[i], group)) return true;\r\n      }\r\n      return false;\r\n    }\r\n    //任务展示前事件\r\n    gantt.attachEvent('onBeforeTaskDisplay', function (id, task) {\r\n      if (params && params.group) {\r\n        if (hasGroup(id, params.group)) {\r\n          return true;\r\n        }\r\n      } else {\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    //计算父级任务进度，数量等\r\n    function calculateTaskData(task) {\r\n      if (task.type != gantt.config.types.project) return task.progress;\r\n      var totalToDo = 0;\r\n      var totalDone = 0;\r\n      gantt.eachTask(function (child) {\r\n        if (child.type != gantt.config.types.project) {\r\n          totalToDo += child.duration;\r\n          totalDone += (child.progress || 0) * child.duration;\r\n        }\r\n      }, task.id);\r\n      if (!totalToDo) return 0;\r\n      else return (totalDone / totalToDo).toFixed(2);\r\n    }\r\n    //刷新任务进度，数量等\r\n    function refreshTaskData(id, submit) {\r\n      if (!gantt.isTaskExists(id)) return;\r\n\r\n      var task = gantt.getTask(id);\r\n      var newProgress = calculateTaskData(task);\r\n\r\n      if (newProgress !== task.progress) {\r\n        task.progress = newProgress;\r\n\r\n        if (!submit) {\r\n          gantt.refreshTask(id);\r\n        } else {\r\n          gantt.updateTask(id);\r\n        }\r\n      }\r\n\r\n      if (!submit && gantt.getParent(id) !== gantt.config.root_id) {\r\n        refreshTaskData(gantt.getParent(id), submit);\r\n      }\r\n    }\r\n    //数据加载单未渲染时的事件\r\n    gantt.attachEvent('onParse', function () {\r\n      gantt.eachTask(function (task) {\r\n        task.progress = calculateTaskData(task);\r\n      });\r\n    });\r\n    //任务更新后事件\r\n    gantt.attachEvent('onAfterTaskUpdate', function (id) {\r\n      refreshTaskData(gantt.getParent(id), true);\r\n    });\r\n    //任务拖拽后事件\r\n    gantt.attachEvent('onTaskDrag', function (id) {\r\n      refreshTaskData(gantt.getParent(id), false);\r\n    });\r\n    //新增任务后事件\r\n    gantt.attachEvent('onAfterTaskAdd', function (id) {\r\n      refreshTaskData(gantt.getParent(id), true);\r\n    });\r\n    (function () {\r\n      var idParentBeforeDeleteTask = 0;\r\n      gantt.attachEvent('onBeforeTaskDelete', function (id) {\r\n        idParentBeforeDeleteTask = gantt.getParent(id);\r\n      });\r\n      gantt.attachEvent('onAfterTaskDelete', function () {\r\n        refreshTaskData(idParentBeforeDeleteTask, true);\r\n      });\r\n    })();\r\n\r\n    gantt.init('gantt');\r\n    gantt.parse({\r\n      data: this.ganttData,\r\n      links: this.ganttLinks\r\n    });\r\n    (function () {\r\n      function shiftTask(task_id, direction) {\r\n        var task = gantt.getTask(task_id);\r\n        task.start_date = gantt.date.add(task.start_date, direction, 'day');\r\n        task.end_date = gantt.calculateEndDate(task.start_date, task.duration);\r\n        gantt.updateTask(task.id);\r\n      }\r\n\r\n      var actions = {\r\n        undo: function () {\r\n          gantt.ext.undo.undo();\r\n        },\r\n        redo: function () {\r\n          gantt.ext.undo.redo();\r\n        },\r\n        indent: function indent(task_id) {\r\n          var prev_id = gantt.getPrevSibling(task_id);\r\n          while (gantt.isSelectedTask(prev_id)) {\r\n            var prev = gantt.getPrevSibling(prev_id);\r\n            if (!prev) break;\r\n            prev_id = prev;\r\n          }\r\n          if (prev_id) {\r\n            var new_parent = gantt.getTask(prev_id);\r\n            gantt.moveTask(task_id, gantt.getChildren(new_parent.id).length, new_parent.id);\r\n            new_parent.type = gantt.config.types.project;\r\n            new_parent.$open = true;\r\n            gantt.updateTask(task_id);\r\n            gantt.updateTask(new_parent.id);\r\n            return task_id;\r\n          }\r\n          return null;\r\n        },\r\n        outdent: function outdent(task_id, initialIndexes, initialSiblings) {\r\n          var cur_task = gantt.getTask(task_id);\r\n          var old_parent = cur_task.parent;\r\n          if (gantt.isTaskExists(old_parent) && old_parent != gantt.config.root_id) {\r\n            var index = gantt.getTaskIndex(old_parent) + 1;\r\n            var prevSibling = initialSiblings[task_id].first;\r\n\r\n            if (gantt.isSelectedTask(prevSibling)) {\r\n              index += initialIndexes[task_id] - initialIndexes[prevSibling];\r\n            }\r\n            gantt.moveTask(task_id, index, gantt.getParent(cur_task.parent));\r\n            if (!gantt.hasChild(old_parent))\r\n              gantt.getTask(old_parent).type = gantt.config.types.task;\r\n            gantt.updateTask(task_id);\r\n            gantt.updateTask(old_parent);\r\n            return task_id;\r\n          }\r\n          return null;\r\n        },\r\n        del: function (task_id) {\r\n          if (gantt.isTaskExists(task_id)) gantt.deleteTask(task_id);\r\n          return task_id;\r\n        },\r\n        moveForward: function (task_id) {\r\n          shiftTask(task_id, 1);\r\n        },\r\n        moveBackward: function (task_id) {\r\n          shiftTask(task_id, -1);\r\n        }\r\n      };\r\n      var cascadeAction = {\r\n        indent: true,\r\n        outdent: true,\r\n        del: true\r\n      };\r\n\r\n      var singularAction = {\r\n        undo: true,\r\n        redo: true\r\n      };\r\n\r\n      gantt.performAction = function (actionName) {\r\n        var action = actions[actionName];\r\n        if (!action) return;\r\n\r\n        if (singularAction[actionName]) {\r\n          action();\r\n          return;\r\n        }\r\n\r\n        gantt.batchUpdate(function () {\r\n          // need to preserve order of items on indent/outdent,\r\n          // remember order before changing anything:\r\n          var indexes = {};\r\n          var siblings = {};\r\n          gantt.eachSelectedTask(function (task_id) {\r\n            gantt.ext.undo.saveState(task_id, 'task');\r\n            indexes[task_id] = gantt.getTaskIndex(task_id);\r\n            siblings[task_id] = {\r\n              first: null\r\n            };\r\n\r\n            var currentId = task_id;\r\n            while (\r\n              gantt.isTaskExists(gantt.getPrevSibling(currentId)) &&\r\n              gantt.isSelectedTask(gantt.getPrevSibling(currentId))\r\n            ) {\r\n              currentId = gantt.getPrevSibling(currentId);\r\n            }\r\n            siblings[task_id].first = currentId;\r\n          });\r\n\r\n          var updated = {};\r\n          gantt.eachSelectedTask(function (task_id) {\r\n            if (cascadeAction[actionName]) {\r\n              if (!updated[gantt.getParent(task_id)]) {\r\n                var updated_id = action(task_id, indexes, siblings);\r\n\r\n                updated[updated_id] = true;\r\n              } else {\r\n                updated[task_id] = true;\r\n              }\r\n            } else {\r\n              action(task_id, indexes);\r\n            }\r\n          });\r\n        });\r\n      };\r\n    })();\r\n\r\n    var els = document.getElementsByClassName('action');\r\n    for (var i = 0; i < els.length; i++) {\r\n      els[i].onclick = function () {\r\n        gantt.performAction(this.name);\r\n      };\r\n    }\r\n\r\n    // gantt.templates.grid_row_class = gantt.templates.task_row_class = function (start, end, task) {\r\n    //   if (task.isGroupSource) return 'summary-row';\r\n    // };\r\n    gantt.templates.task_class = function (start, end, task) {\r\n      if (task.isGroupSource) return 'summary-bar';\r\n    };\r\n    //任务类名设置\r\n    gantt.templates.task_class = function (start, end, task) {\r\n      let className = '';\r\n      if (task.type == gantt.config.types.project)\r\n        className = className + 'hide_project_progress_drag ';\r\n      if (task.isGroupSource) className = className + 'summary-bar ';\r\n      if (task.progress == 0) {\r\n        className = className + 'notStart';\r\n      } else if (0.3 > task.progress > 0) {\r\n        className = className + 'initial';\r\n      } else if (0.8 >= task.progress >= 0.3) {\r\n        className = className + 'inProgress';\r\n      } else if (1 > task.progress > 0.8) {\r\n        className = className + 'finalStage';\r\n      } else if (task.progress == 1) {\r\n        className = className + 'end';\r\n      }\r\n      return className;\r\n    };\r\n    // gantt.templates.progress_text = function (start, end, task) {\r\n    //   return (\r\n    //     \"<span style='float:left;margin-left:10px;color:white;'>\" +\r\n    //     (task.progress * 100).toFixed(2) +\r\n    //     '% </span>'\r\n    //   );\r\n    // };\r\n\r\n    // gantt.templates.task_class = function (start, end, task) {\r\n    //   if (task.type == gantt.config.types.project) return 'hide_project_progress_drag';\r\n    // };\r\n    //撤销\r\n    document.addEventListener('keydown', function (event) {\r\n      if (event.ctrlKey && event.key === 'z') {\r\n        // 检测到用户按下 Ctrl + Z 组合键时，调用撤销函数\r\n        gantt.undo();\r\n      }\r\n    });\r\n    //重做\r\n    document.addEventListener('keydown', function (event) {\r\n      if (event.ctrlKey && event.key === 'y') {\r\n        gantt.redo();\r\n      }\r\n    });\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.summary-row,\r\n.summary-row.odd {\r\n  background-color: #eeeeee;\r\n  font-weight: bold;\r\n}\r\n\r\n.gantt_grid div,\r\n.gantt_data_area div {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.container {\r\n  height: 100% !important;\r\n}\r\n\r\n#gantt {\r\n  .notStart .gantt_task_progress {\r\n    background-color: #ebedf0;\r\n  }\r\n  .initial .gantt_task_progress {\r\n    background-color: red;\r\n  }\r\n  .inProgress .gantt_task_progress {\r\n    background-color: #3a8cd5;\r\n  }\r\n  .finalStage .gantt_task_progress {\r\n    background-color: #d4673b;\r\n  }\r\n  .end .gantt_task_progress {\r\n    background-color: #7ee048;\r\n  }\r\n\r\n  .summary-bar {\r\n    // opacity: 0.4;\r\n    background-color: #b7dcbb !important;\r\n  }\r\n}\r\n</style>\r\n": "<template>\r\n  <div style=\"width: 100%; height: 100%\">\r\n    <el-form :model=\"queryParams\" :inline=\"true\">\r\n      <el-form-item :label=\"$t(分组查询)\">\r\n        <el-select v-model=\"queryParams.group\" clearable>\r\n          <el-option value=\"x\" label=\"x\"></el-option>\r\n          <el-option value=\"y\" label=\"y\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button @click=\"ganttFilter()\">{{ $t(查询) }}</el-button>\r\n        <el-button @click=\"handleImport()\">{{ $t(导入) }}</el-button>\r\n        <el-button @click=\"handleExport()\">{{ $t(导出) }}</el-button>\r\n        <el-button @click=\"handleGroup()\">{{ $t(分组) }}</el-button>\r\n        <el-button @click=\"handleResetGroup()\">{{ $t(还原分组) }}</el-button>\r\n        <el-button @click=\"sortByDuration()\">{{ $t(按工时排序) }}</el-button>\r\n        <el-button @click=\"sortDefault()\">{{ $t(默认排序) }}</el-button>\r\n        <!-- <el-button @click=\"sortByPlanQty()\">{{ $t(按计划数量排序) }}</el-button> -->\r\n        <el-button @click=\"handleReadOnly()\">{{\r\n          this.readOnly == false ? 只读 : 编辑\r\n        }}</el-button>\r\n        <el-button @click=\"submit()\">{{ $t(保存) }}</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div\r\n      id=\"gantt\"\r\n      style=\"width: 100%; height: calc(100% - 42px); border-radius: 8px; overflow: hidden\"\r\n    ></div>\r\n    <c-dialog :title=\"title\" v-model=\"open\" width=\"450\" :modal=\"true\">\r\n      <el-upload :http-request=\"loadExcel\" action=\" \" :limit=\"1\">\r\n        <el-button type=\"primary\">{{ $t(选择文件) }}</el-button>\r\n        <template #tip>\r\n          <div class=\"el-upload__tip\">{{ $t(只能上传xlsx文件) }}</div>\r\n        </template>\r\n      </el-upload>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"open = false\">{{ $t(取消) }}</el-button>\r\n        </span>\r\n      </template>\r\n    </c-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { gantt } from 'dhtmlx-gantt';\r\nimport 'dhtmlx-gantt/codebase/dhtmlxgantt.css';\r\n\r\nvar params = { group: null };\r\nexport default {\r\n  name: 'gantt',\r\n  props: {\r\n    tasks: {\r\n      type: Object,\r\n      default() {\r\n        return { data: [], links: [] };\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      readOnly: false,\r\n      open: false,\r\n      queryParams: {\r\n        group: null\r\n      },\r\n      selectIds: [],\r\n      sourceTaskTop: null,\r\n      sourceId: null,\r\n      target: null,\r\n      targetParent: null,\r\n      columns: [\r\n        { name: 'text', label: 名称, tree: true, width: '200', align: 'center', resize: true },\r\n        {\r\n          name: 'duration',\r\n          label: 工时,\r\n          align: 'center',\r\n          template: function (obj) {\r\n            return obj.duration + 小时;\r\n          }\r\n        },\r\n        {\r\n          name: 'progress',\r\n          label: 进度,\r\n          align: 'center',\r\n          template: function (obj) {\r\n            return (obj.progress * 100).toFixed(2) + '%';\r\n          }\r\n        },\r\n        {\r\n          name: 'planQty',\r\n          label: 计划数量,\r\n          align: 'center',\r\n          template: function (obj) {\r\n            return obj.planQty;\r\n          }\r\n        }\r\n      ],\r\n      lightBoxSections: [\r\n        { name: 'description', height: 38, map_to: 'text', type: 'textarea', focus: true },\r\n        {\r\n          name: 'priority',\r\n          height: 22,\r\n          map_to: 'priority',\r\n          type: 'select',\r\n          options: [\r\n            { key: 1, label: 'High' },\r\n            { key: 2, label: 'Normal' },\r\n            { key: 3, label: 'Low' }\r\n          ]\r\n        },\r\n        { name: 'progress', type: 'textarea', map_to: 'progress', height: 20 },\r\n        { name: 'time', type: 'duration', map_to: 'auto' },\r\n        { name: 'planQty', type: 'textarea', map_to: 'planQty', height: 20 }\r\n      ],\r\n      ganttData: [\r\n        {\r\n          id: 11,\r\n          text: 工段 A, //名称\r\n          type: 'project', //类型\r\n          progress: 0.6, //进度\r\n          open: true, //是否展开\r\n          start_date: '02-04-2023 0 0:00', //时间\r\n          duration: 13, //工期\r\n          planQty: 60, //计划数量\r\n          group: 'y', //分组\r\n          parent: 0 //父级id\r\n        },\r\n        // {\r\n        //   id: 12,\r\n        //   text: '产线 A-1',\r\n        //   type: 'project',\r\n        //   start_date: '02-04-2023 0 0:00',\r\n        //   duration: 5,\r\n        //   parent: '11',\r\n        //   progress: 0.3,\r\n        //   planQty: 30,\r\n        //   group: 'y',\r\n        //   open: true\r\n        // },\r\n        {\r\n          id: 13,\r\n          text: '产线 A-2',\r\n          start_date: '02-04-2023 0 0:00',\r\n          type: 'project',\r\n          render: 'split',\r\n          parent: '11',\r\n          progress: 0.3,\r\n          planQty: 40,\r\n          group: 'y',\r\n          open: true,\r\n          duration: 5\r\n        },\r\n        {\r\n          id: 17,\r\n          text: '任务 A-2-1',\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 1,\r\n          group: 'y',\r\n          parent: '13',\r\n          progress: 0.2,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 18,\r\n          text: '任务 A-2-2',\r\n          start_date: '02-04-2023 01:00',\r\n          duration: 2,\r\n          parent: '13',\r\n          progress: 0.5,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 19,\r\n          text: '任务 A-2-3',\r\n          start_date: '02-04-2023 03:00',\r\n          duration: 1,\r\n          parent: '13',\r\n          progress: 0.9,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 20,\r\n          text: '任务 A-2-4',\r\n          start_date: '02-04-2023 04:00',\r\n          duration: 2,\r\n          parent: '13',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 14,\r\n          text: '产线 A-3',\r\n          type: 'project',\r\n          start_date: '02-04-2023 03:00',\r\n          duration: 6,\r\n          parent: '11',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true\r\n        },\r\n        {\r\n          id: 31,\r\n          text: '任务 A-3-1',\r\n          start_date: '02-04-2023 09:00',\r\n          duration: 1,\r\n          group: 'y',\r\n          parent: '14',\r\n          progress: 0.2,\r\n          planQty: 10,\r\n          group: 'y',\r\n          open: true\r\n        },\r\n        {\r\n          id: 15,\r\n          text: '产线 A-4',\r\n          type: 'project',\r\n          render: 'split',\r\n          parent: '11',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true,\r\n          start_date: '02-04-2023 04:00',\r\n          duration: 11\r\n        },\r\n        {\r\n          id: 21,\r\n          text: '任务 A-4-1',\r\n          start_date: '02-04-2023 04:00',\r\n          duration: 4,\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true\r\n        },\r\n        {\r\n          id: 22,\r\n          text: '任务 A-4-2',\r\n          start_date: '02-04-2023 05:00',\r\n          duration: 3,\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true\r\n        },\r\n        {\r\n          id: 23,\r\n          text: '任务 A-4-3',\r\n          start_date: '02-04-2023 09:00',\r\n          duration: 3,\r\n          type: 'milestone',\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true,\r\n          duration: 2\r\n        },\r\n        {\r\n          id: 16,\r\n          text: '任务 A-4-4',\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 1,\r\n          type: 'milestone',\r\n          parent: '15',\r\n          progress: 0,\r\n          planQty: 10,\r\n          group: 'x',\r\n          open: true,\r\n          duration: 0\r\n        },\r\n        {\r\n          id: 101,\r\n          text: 工段 B,\r\n\r\n          type: 'project',\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 10,\r\n          planQty: 10,\r\n          group: 'x',\r\n          parent: 0\r\n        },\r\n        {\r\n          id: 102,\r\n          text: '产线 B-1',\r\n\r\n          type: 'project',\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 6,\r\n          planQty: 4,\r\n          group: 'x',\r\n          parent: 101\r\n        },\r\n        {\r\n          id: 103,\r\n          text: '任务 B-1-1',\r\n\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 2,\r\n          planQty: 4,\r\n          group: 'x',\r\n          parent: 102\r\n        },\r\n        {\r\n          id: 104,\r\n          text: '任务 B-1-2',\r\n\r\n          progress: 0,\r\n          open: true,\r\n          start_date: '02-04-2023 0 0:00',\r\n          duration: 1,\r\n          planQty: 4,\r\n          group: 'x',\r\n          parent: 102\r\n        }\r\n      ],\r\n      ganttLinks: [\r\n        { id: '1', source: '17', target: '18', type: '0' },\r\n        { id: '2', source: '18', target: '19', type: '0' },\r\n        { id: '3', source: '19', target: '20', type: '0' },\r\n        { id: '4', source: '21', target: '22', type: '0' },\r\n        { id: '5', source: '22', target: '23', type: '0' }\r\n      ],\r\n      labels: {\r\n        planQty: 计划数量,\r\n        dhx_cal_today_button: 今天,\r\n        day_tab: 日,\r\n        week_tab: 周,\r\n        month_tab: 月,\r\n        new_event: 新建日程,\r\n        icon_save: 保存,\r\n        icon_cancel: 关闭,\r\n        icon_details: 详细,\r\n        icon_edit: 编辑,\r\n        icon_delete: 删除,\r\n        confirm_closing: 请确认是否撤销修改!, //Your changes will be lost, are your sure?\r\n        confirm_deleting: 是否删除计划?,\r\n        section_description: 描述:,\r\n        section_planQty: 计划数量:,\r\n        section_progress: 进度,\r\n        section_time: 时间范围:,\r\n        section_type: 类型:,\r\n        section_text: 计划名称:,\r\n        section_test: 测试:,\r\n        section_projectClass: 项目类型:,\r\n        taskProjectType_0: 项目任务,\r\n        taskProjectType_1: 普通任务,\r\n        section_head: 负责人:,\r\n        section_priority: 优先级:,\r\n        taskProgress: 任务状态,\r\n        taskProgress_0: 未开始,\r\n        taskProgress_1: 进行中,\r\n        taskProgress_2: 已完成,\r\n        taskProgress_3: 已延期,\r\n        taskProgress_4: 搁置中,\r\n        section_template: 'Details',\r\n        /* grid columns */\r\n        column_text: 计划名称,\r\n        column_start_date: 开始时间,\r\n        column_duration: 持续时间,\r\n        column_add: '',\r\n        column_priority: 难度,\r\n        /* link confirmation */\r\n        link: 关联,\r\n        confirm_link_deleting: 将被删除,\r\n        message_ok: 确定,\r\n        message_cancel: 取消,\r\n        link_start: ' (开始)',\r\n        link_end: ' (结束)',\r\n\r\n        type_task: 任务,\r\n        type_project: 项目,\r\n        type_milestone: 里程碑,\r\n        minutes: 分钟,\r\n        hours: 小时,\r\n        days: 天,\r\n        weeks: 周,\r\n        months: 月,\r\n        years: 年\r\n      },\r\n      tempGanttData: []\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    submit() {\r\n      console.log('AAA', gantt.getLinks());\r\n    },\r\n    //还原分组\r\n    handleResetGroup() {\r\n      if (this.tempGanttData.length != 0) {\r\n        gantt.clearAll();\r\n        this.ganttData = [];\r\n        this.tempGanttData.forEach(x => {\r\n          x.start_date = new Date(x.start_date);\r\n          x.end_date = new Date(x.end_date);\r\n          x.parent = x.sourceParent;\r\n          if (!x.isGroupSource) {\r\n            this.ganttData.push(x);\r\n          }\r\n        });\r\n        gantt.parse({ data: this.ganttData, links: this.ganttLinks });\r\n      }\r\n    },\r\n    //随机id\r\n    generateRandomId(length) {\r\n      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n      var id = '';\r\n      for (var i = 0; i < length; i++) {\r\n        id += characters.charAt(Math.floor(Math.random() * characters.length));\r\n      }\r\n      return id;\r\n    },\r\n    //分组\r\n    handleGroup() {\r\n      let groupSourceMap = new Map();\r\n      this.tempGanttData = [];\r\n      this.ganttData.forEach(x => {\r\n        if (!groupSourceMap.get(x.group)) {\r\n          groupSourceMap.set(x.group, {\r\n            id: this.generateRandomId(8),\r\n            text: x.group,\r\n            type: 'project',\r\n\r\n            progress: 0,\r\n            open: true,\r\n            start_date: x.start_date,\r\n            duration: 2,\r\n            parent: 0,\r\n            isGroupSource: true\r\n          });\r\n          this.tempGanttData.push(groupSourceMap.get(x.group));\r\n          x.sourceParent = x.parent;\r\n          x.parent = groupSourceMap.get(x.group).id;\r\n          this.tempGanttData.push(x);\r\n        } else {\r\n          x.sourceParent = x.parent;\r\n          x.parent = groupSourceMap.get(x.group).id;\r\n          this.tempGanttData.push(x);\r\n        }\r\n      });\r\n      gantt.clearAll();\r\n      gantt.parse({ data: this.tempGanttData, links: this.ganttLinks });\r\n    },\r\n    sortByDuration() {\r\n      this.tempGanttData = JSON.parse(JSON.stringify(this.ganttData));\r\n      gantt.sort('duration', true);\r\n    },\r\n    sortDefault() {\r\n      gantt.clearAll();\r\n      this.ganttData = [];\r\n      this.tempGanttData.forEach(x => {\r\n        x.start_date = new Date(x.start_date);\r\n        x.end_date = new Date(x.end_date);\r\n        this.ganttData.push(x);\r\n        // x.parent = x.sourceParent;\r\n        // if (!x.isGroupSource) {\r\n        //   this.ganttData.push(x);\r\n        // }\r\n      });\r\n      gantt.parse({ data: this.ganttData, links: this.ganttLinks });\r\n    },\r\n    sortByPlanQty() {\r\n      gantt.sort('planQty', true);\r\n    },\r\n    //只读\r\n    handleReadOnly() {\r\n      this.readOnly = !this.readOnly;\r\n      gantt.config.readonly = this.readOnly;\r\n    },\r\n    //导入excel\r\n    loadExcel(data) {\r\n      gantt.importFromExcel({\r\n        data: data.file,\r\n        callback: async function (project) {\r\n          if (project) {\r\n            await project.forEach(x => {\r\n              let ymdParts = x.start_date.split(' ')[0].split('-');\r\n              let hsParts = x.start_date.split(' ')[1].split(':');\r\n              x.start_date =\r\n                ymdParts[2] +\r\n                '-' +\r\n                ymdParts[1] +\r\n                '-' +\r\n                ymdParts[0] +\r\n                ' ' +\r\n                hsParts[0] +\r\n                ':' +\r\n                hsParts[1];\r\n            });\r\n            gantt.clearAll();\r\n            gantt.parse({ data: project });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    //打开导出弹窗\r\n    handleImport() {\r\n      this.open = true;\r\n    },\r\n    //导出excel\r\n    handleExport() {\r\n      console.log(this.ganttData);\r\n      gantt.exportToExcel({\r\n        name: `gantt_${new Date().getTime()}.xlsx`,\r\n        columns: [\r\n          { id: 'id', header: 'id', width: 25, type: 'number' },\r\n          { id: 'parent', header: 'parent', width: 25, type: 'number' },\r\n          { id: 'text', header: 'text', width: 25 },\r\n          { id: 'duration', header: 'duration', width: 25, type: 'number' },\r\n          { id: 'planQty', header: 'planQty', width: 25, type: 'number' },\r\n          { id: 'type', header: 'type', width: 25 },\r\n          { id: 'start_date', header: 'start_date', width: 25, type: 'date' }\r\n        ]\r\n      });\r\n    },\r\n    // 过滤\r\n    ganttFilter() {\r\n      params = this.queryParams;\r\n      gantt.refreshData();\r\n    },\r\n    //任务拆分\r\n    onDragEnd(startPoint, endPoint, startDate, endDate, tasksBetweenDates, tasksInRow) {\r\n      if (tasksInRow.length === 1) {\r\n        var currentTask = tasksInRow[0];\r\n        if (currentTask.type === 'project') {\r\n          currentTask.render = 'split';\r\n          gantt.addTask(\r\n            {\r\n              text: 'Subtask of ' + currentTask.text,\r\n              start_date: gantt.roundDate(startDate),\r\n              end_date: gantt.roundDate(endDate)\r\n            },\r\n            currentTask.id\r\n          );\r\n        } else {\r\n          let sourceStartDate = currentTask.start_date;\r\n          let sourceEndDate = currentTask.end_date;\r\n          let newStartDate = gantt.roundDate(startDate);\r\n          let newEndDate = gantt.roundDate(endDate);\r\n          let duration = 0;\r\n          if (sourceStartDate.getTime() <= newStartDate.getTime()) {\r\n            duration = gantt.calculateDuration({\r\n              start_date: sourceStartDate,\r\n              end_date: newStartDate\r\n            });\r\n            if (duration > 0) {\r\n              if (newEndDate.getTime() == sourceEndDate.getTime()) {\r\n                var nextTask = gantt.addTask(\r\n                  {\r\n                    text: currentTask.text + '-拆分任务',\r\n                    start_date: newStartDate,\r\n                    end_date: newEndDate\r\n                  },\r\n                  currentTask.parent\r\n                );\r\n                gantt.moveTask(nextTask, currentTask.$local_index + 1, currentTask.parent);\r\n                currentTask.end_date = newStartDate;\r\n              } else {\r\n                var preTask = gantt.addTask(\r\n                  {\r\n                    text: currentTask.text + '-拆分任务',\r\n                    start_date: sourceStartDate,\r\n                    end_date: newStartDate\r\n                  },\r\n                  currentTask.parent\r\n                );\r\n                gantt.moveTask(preTask, currentTask.$local_index, currentTask.parent);\r\n                let endDuration = gantt.calculateDuration({\r\n                  start_date: newEndDate,\r\n                  end_date: sourceEndDate\r\n                });\r\n                if (endDuration > 0) {\r\n                  var newTask = gantt.addTask(\r\n                    {\r\n                      text: currentTask.text + '-拆分任务',\r\n                      start_date: newStartDate,\r\n                      end_date: newEndDate\r\n                    },\r\n                    currentTask.parent\r\n                  );\r\n                  gantt.moveTask(newTask, currentTask.$local_index, currentTask.parent);\r\n                  currentTask.start_date = gantt.roundDate(endDate);\r\n                } else {\r\n                  currentTask.start_date = newStartDate;\r\n                }\r\n              }\r\n            } else if (duration == 0) {\r\n              var newTask = gantt.addTask(\r\n                {\r\n                  text: currentTask.text + '-拆分任务',\r\n                  start_date: newStartDate,\r\n                  end_date: newEndDate\r\n                },\r\n                currentTask.parent\r\n              );\r\n              gantt.moveTask(newTask, currentTask.$local_index, currentTask.parent);\r\n              currentTask.start_date = gantt.roundDate(endDate);\r\n            }\r\n          }\r\n          gantt.updateTask(currentTask.id);\r\n        }\r\n      } else if (tasksInRow.length === 0) {\r\n        gantt.createTask({\r\n          text: 'New task',\r\n          start_date: gantt.roundDate(startDate),\r\n          end_date: gantt.roundDate(endDate)\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  //将初始化方法移动到methods里也会报错\r\n  mounted() {\r\n    gantt.plugins({\r\n      click_drag: true,\r\n      multiselect: true,\r\n      undo: true,\r\n      export_api: true\r\n    });\r\n    gantt.config.order_branch = true; // 启用任务条垂直拖拽\r\n    gantt.config.drag_project = true; //整体拖拽\r\n    gantt.config.drag_move = true; // 允许任务条拖动\r\n    gantt.config.lightbox.sections = this.lightBoxSections; // 编辑弹窗设置\r\n    gantt.config.open_split_tasks = true; //通过单击 +/- 按钮启用展开/折叠拆分任务的可能性\r\n    gantt.config.multiselect = true; //多选\r\n    gantt.config.click_drag = {\r\n      callback: this.onDragEnd\r\n    };\r\n    gantt.config.date_format = '%d-%m-%Y %H:%i';\r\n    gantt.config.min_column_width = 20;\r\n    gantt.config.duration_unit = 'minute';\r\n    gantt.config.duration_step = 60;\r\n    gantt.config.scale_height = 75;\r\n    gantt.config.readonly = this.readOnly; //只读\r\n    gantt.locale.date = {\r\n      //时间显示修改\r\n      month_full: [\r\n        1月,\r\n        2月,\r\n        3月,\r\n        4月,\r\n        5月,\r\n        6月,\r\n        7月,\r\n        8月,\r\n        9月,\r\n        10月,\r\n        11月,\r\n        12月\r\n      ],\r\n      month_short: [\r\n        1月,\r\n        2月,\r\n        3月,\r\n        4月,\r\n        5月,\r\n        6月,\r\n        7月,\r\n        8月,\r\n        9月,\r\n        10月,\r\n        11月,\r\n        12月\r\n      ],\r\n      day_full: [星期日, 星期一, 星期二, 星期三, 星期四, 星期五, 星期六],\r\n      day_short: [星期日, 星期一, 星期二, 星期三, 星期四, 星期五, 星期六]\r\n    };\r\n    // gantt.config.date_format = '%Y-%m-%d %H:%i';\r\n    gantt.config.scales = [\r\n      { unit: 'hour', step: 1, format: '%g %a' },\r\n      { unit: 'day', step: 1, format: '%j %F, %l' },\r\n      { unit: 'minute', step: 10, format: '%i' }\r\n    ];\r\n    gantt.locale.labels = this.labels;\r\n    gantt.config.columns = this.columns;\r\n    // gantt.config.duration_unit = 'hour';\r\n    // gantt.config.duration_step = 1;\r\n    // gantt.config.scale_unit = 'hour'; //单元格时间单位\r\n    // gantt.config.step = 1; //单元格时间长度\r\n    // gantt.config.date_scale = '%H:%i'; // 设置日期格式为小时:分钟\r\n    // gantt.config.multiselect_one_level = true;\r\n    gantt.templates.task_class =\r\n      gantt.templates.grid_row_class =\r\n      gantt.templates.task_row_class =\r\n        function (start, end, task) {\r\n          if (gantt.isSelectedTask(task.id)) return 'gantt_selected';\r\n        };\r\n    //拖拽事件\r\n    gantt.attachEvent('onAfterTaskMove', async function (id, parent, tindex) {\r\n      this.target = tindex;\r\n      this.targetParent = parent;\r\n      this.sourceId = id;\r\n      // this.sourceTaskTop = gantt.getTaskTop(id);\r\n      return true;\r\n    });\r\n    //树状图任务拖拽结束事件（将方法单独放到metheds里会报错）\r\n    gantt.attachEvent('onRowDragEnd', function (id, parent, tindex) {\r\n      // console.log(\"数据\",this.ganttData)\r\n      let selectedTaskIds = this.selectIds;\r\n      function sortBroTask(sTask) {\r\n        let parentTask = gantt.getTask(gantt.getParent(sTask.id));\r\n        //排列同级兄弟的时间跨度\r\n        let broIds = gantt.getSiblings(sTask.id);\r\n        broIds.forEach((tId, i) => {\r\n          let task = gantt.getTask(tId);\r\n          if (i == 0) {\r\n            task.start_date = parentTask.start_date;\r\n          } else {\r\n            let preTask = gantt.getTask(broIds[i - 1]);\r\n            task.start_date = preTask.end_date;\r\n          }\r\n          task.end_date = gantt.calculateEndDate(task.start_date, task.duration);\r\n        });\r\n      }\r\n      //单选不执行多选事件\r\n      if (!selectedTaskIds || selectedTaskIds.length <= 1) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      if (!selectedTaskIds.find(x => x == id)) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      let sTask = gantt.getTask(selectedTaskIds[0]);\r\n      //不是第三级的批量拖拽，不执行\r\n      if (sTask.$level != 2) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      //本次拖拽是否在同一个父级任务下进行\r\n      let isSameParent = true;\r\n      let isSameLevel = true;\r\n      let level = null;\r\n      gantt.eachSelectedTask(id => {\r\n        let task = gantt.getTask(id);\r\n        if (task.parent != this.targetParent) {\r\n          isSameParent = false;\r\n        }\r\n        if (level == null) {\r\n          level = task.$level;\r\n        } else if (level != task.$level) {\r\n          isSameLevel = false;\r\n        }\r\n      });\r\n      //非同级多选不执行\r\n      if (!isSameLevel) {\r\n        sortBroTask({ id });\r\n        return true;\r\n      }\r\n      // console.log(是否相同父级, isSameParent);\r\n      if (isSameParent) {\r\n        let sourceTask = gantt.getTask(id);\r\n        let index = null;\r\n        let afterLength = 0;\r\n        selectedTaskIds.forEach((nid, i) => {\r\n          if (nid == id) {\r\n            index = i;\r\n          }\r\n          let task = gantt.getTask(nid);\r\n          // console.log(任务, sourceTask.$local_index);\r\n          //该任务在当前任务之前\r\n          if (index == null || i < index) {\r\n            if (task.$local_index < sourceTask.$local_index) {\r\n              let targetIndex = sourceTask.$local_index - 1;\r\n              // console.log(任务前, targetIndex);\r\n              gantt.moveTask(nid, targetIndex, this.targetParent);\r\n            } else {\r\n              // console.log(任务前, sourceTask.$local_index);\r\n              gantt.moveTask(nid, sourceTask.$local_index, this.targetParent);\r\n            }\r\n          } else if (i > index) {\r\n            //该任务在当前任务之后\r\n\r\n            if (task.$local_index < sourceTask.$local_index) {\r\n              // console.log(任务前, sourceTask.$local_index + afterLength, afterLength);\r\n              gantt.moveTask(nid, sourceTask.$local_index + afterLength, this.targetParent);\r\n              afterLength++;\r\n            } else {\r\n              let targetIndex = sourceTask.$local_index + afterLength + 1;\r\n              // console.log(任务前, targetIndex, afterLength);\r\n              gantt.moveTask(nid, targetIndex, this.targetParent);\r\n              afterLength++;\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        //修改拖拽插入的任务顺序;\r\n        sTask = JSON.parse(JSON.stringify(sTask));\r\n        selectedTaskIds.forEach((nid, i) => {\r\n          let task = gantt.getTask(nid);\r\n          if (i !== 0) {\r\n            task.$local_index = sTask.$local_index + i;\r\n            gantt.moveTask(nid, task.$local_index, this.targetParent);\r\n          }\r\n        });\r\n      }\r\n\r\n      sortBroTask(sTask);\r\n      // let finalTasks = [];\r\n      // gantt.eachTask(function (task) {\r\n      //   finalTasks.push(task);\r\n      // }, this.targetParent);\r\n      // console.log(最终任务排序, finalTasks);\r\n\r\n      return true;\r\n    });\r\n    //弹窗保存事件\r\n    gantt.attachEvent('onLightboxSave', function (id, task, is_new) {\r\n      return true;\r\n    });\r\n    //多选选中事件\r\n    gantt.attachEvent('onTaskMultiSelect', function (id, state, e) {\r\n      if (!this.selectIds) {\r\n        this.selectIds = [];\r\n      }\r\n      if (state) {\r\n        this.selectIds.push(id);\r\n      } else {\r\n        this.selectIds.splice(this.selectIds.indexOf(id), 1);\r\n      }\r\n      return true;\r\n    });\r\n    //过滤事件\r\n    function hasGroup(parent, group) {\r\n      if (gantt.getTask(parent).group == group) return true;\r\n\r\n      var child = gantt.getChildren(parent);\r\n      for (var i = 0; i < child.length; i++) {\r\n        if (hasGroup(child[i], group)) return true;\r\n      }\r\n      return false;\r\n    }\r\n    //任务展示前事件\r\n    gantt.attachEvent('onBeforeTaskDisplay', function (id, task) {\r\n      if (params && params.group) {\r\n        if (hasGroup(id, params.group)) {\r\n          return true;\r\n        }\r\n      } else {\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    //计算父级任务进度，数量等\r\n    function calculateTaskData(task) {\r\n      if (task.type != gantt.config.types.project) return task.progress;\r\n      var totalToDo = 0;\r\n      var totalDone = 0;\r\n      gantt.eachTask(function (child) {\r\n        if (child.type != gantt.config.types.project) {\r\n          totalToDo += child.duration;\r\n          totalDone += (child.progress || 0) * child.duration;\r\n        }\r\n      }, task.id);\r\n      if (!totalToDo) return 0;\r\n      else return (totalDone / totalToDo).toFixed(2);\r\n    }\r\n    //刷新任务进度，数量等\r\n    function refreshTaskData(id, submit) {\r\n      if (!gantt.isTaskExists(id)) return;\r\n\r\n      var task = gantt.getTask(id);\r\n      var newProgress = calculateTaskData(task);\r\n\r\n      if (newProgress !== task.progress) {\r\n        task.progress = newProgress;\r\n\r\n        if (!submit) {\r\n          gantt.refreshTask(id);\r\n        } else {\r\n          gantt.updateTask(id);\r\n        }\r\n      }\r\n\r\n      if (!submit && gantt.getParent(id) !== gantt.config.root_id) {\r\n        refreshTaskData(gantt.getParent(id), submit);\r\n      }\r\n    }\r\n    //数据加载单未渲染时的事件\r\n    gantt.attachEvent('onParse', function () {\r\n      gantt.eachTask(function (task) {\r\n        task.progress = calculateTaskData(task);\r\n      });\r\n    });\r\n    //任务更新后事件\r\n    gantt.attachEvent('onAfterTaskUpdate', function (id) {\r\n      refreshTaskData(gantt.getParent(id), true);\r\n    });\r\n    //任务拖拽后事件\r\n    gantt.attachEvent('onTaskDrag', function (id) {\r\n      refreshTaskData(gantt.getParent(id), false);\r\n    });\r\n    //新增任务后事件\r\n    gantt.attachEvent('onAfterTaskAdd', function (id) {\r\n      refreshTaskData(gantt.getParent(id), true);\r\n    });\r\n    (function () {\r\n      var idParentBeforeDeleteTask = 0;\r\n      gantt.attachEvent('onBeforeTaskDelete', function (id) {\r\n        idParentBeforeDeleteTask = gantt.getParent(id);\r\n      });\r\n      gantt.attachEvent('onAfterTaskDelete', function () {\r\n        refreshTaskData(idParentBeforeDeleteTask, true);\r\n      });\r\n    })();\r\n\r\n    gantt.init('gantt');\r\n    gantt.parse({\r\n      data: this.ganttData,\r\n      links: this.ganttLinks\r\n    });\r\n    (function () {\r\n      function shiftTask(task_id, direction) {\r\n        var task = gantt.getTask(task_id);\r\n        task.start_date = gantt.date.add(task.start_date, direction, 'day');\r\n        task.end_date = gantt.calculateEndDate(task.start_date, task.duration);\r\n        gantt.updateTask(task.id);\r\n      }\r\n\r\n      var actions = {\r\n        undo: function () {\r\n          gantt.ext.undo.undo();\r\n        },\r\n        redo: function () {\r\n          gantt.ext.undo.redo();\r\n        },\r\n        indent: function indent(task_id) {\r\n          var prev_id = gantt.getPrevSibling(task_id);\r\n          while (gantt.isSelectedTask(prev_id)) {\r\n            var prev = gantt.getPrevSibling(prev_id);\r\n            if (!prev) break;\r\n            prev_id = prev;\r\n          }\r\n          if (prev_id) {\r\n            var new_parent = gantt.getTask(prev_id);\r\n            gantt.moveTask(task_id, gantt.getChildren(new_parent.id).length, new_parent.id);\r\n            new_parent.type = gantt.config.types.project;\r\n            new_parent.$open = true;\r\n            gantt.updateTask(task_id);\r\n            gantt.updateTask(new_parent.id);\r\n            return task_id;\r\n          }\r\n          return null;\r\n        },\r\n        outdent: function outdent(task_id, initialIndexes, initialSiblings) {\r\n          var cur_task = gantt.getTask(task_id);\r\n          var old_parent = cur_task.parent;\r\n          if (gantt.isTaskExists(old_parent) && old_parent != gantt.config.root_id) {\r\n            var index = gantt.getTaskIndex(old_parent) + 1;\r\n            var prevSibling = initialSiblings[task_id].first;\r\n\r\n            if (gantt.isSelectedTask(prevSibling)) {\r\n              index += initialIndexes[task_id] - initialIndexes[prevSibling];\r\n            }\r\n            gantt.moveTask(task_id, index, gantt.getParent(cur_task.parent));\r\n            if (!gantt.hasChild(old_parent))\r\n              gantt.getTask(old_parent).type = gantt.config.types.task;\r\n            gantt.updateTask(task_id);\r\n            gantt.updateTask(old_parent);\r\n            return task_id;\r\n          }\r\n          return null;\r\n        },\r\n        del: function (task_id) {\r\n          if (gantt.isTaskExists(task_id)) gantt.deleteTask(task_id);\r\n          return task_id;\r\n        },\r\n        moveForward: function (task_id) {\r\n          shiftTask(task_id, 1);\r\n        },\r\n        moveBackward: function (task_id) {\r\n          shiftTask(task_id, -1);\r\n        }\r\n      };\r\n      var cascadeAction = {\r\n        indent: true,\r\n        outdent: true,\r\n        del: true\r\n      };\r\n\r\n      var singularAction = {\r\n        undo: true,\r\n        redo: true\r\n      };\r\n\r\n      gantt.performAction = function (actionName) {\r\n        var action = actions[actionName];\r\n        if (!action) return;\r\n\r\n        if (singularAction[actionName]) {\r\n          action();\r\n          return;\r\n        }\r\n\r\n        gantt.batchUpdate(function () {\r\n          // need to preserve order of items on indent/outdent,\r\n          // remember order before changing anything:\r\n          var indexes = {};\r\n          var siblings = {};\r\n          gantt.eachSelectedTask(function (task_id) {\r\n            gantt.ext.undo.saveState(task_id, 'task');\r\n            indexes[task_id] = gantt.getTaskIndex(task_id);\r\n            siblings[task_id] = {\r\n              first: null\r\n            };\r\n\r\n            var currentId = task_id;\r\n            while (\r\n              gantt.isTaskExists(gantt.getPrevSibling(currentId)) &&\r\n              gantt.isSelectedTask(gantt.getPrevSibling(currentId))\r\n            ) {\r\n              currentId = gantt.getPrevSibling(currentId);\r\n            }\r\n            siblings[task_id].first = currentId;\r\n          });\r\n\r\n          var updated = {};\r\n          gantt.eachSelectedTask(function (task_id) {\r\n            if (cascadeAction[actionName]) {\r\n              if (!updated[gantt.getParent(task_id)]) {\r\n                var updated_id = action(task_id, indexes, siblings);\r\n\r\n                updated[updated_id] = true;\r\n              } else {\r\n                updated[task_id] = true;\r\n              }\r\n            } else {\r\n              action(task_id, indexes);\r\n            }\r\n          });\r\n        });\r\n      };\r\n    })();\r\n\r\n    var els = document.getElementsByClassName('action');\r\n    for (var i = 0; i < els.length; i++) {\r\n      els[i].onclick = function () {\r\n        gantt.performAction(this.name);\r\n      };\r\n    }\r\n\r\n    // gantt.templates.grid_row_class = gantt.templates.task_row_class = function (start, end, task) {\r\n    //   if (task.isGroupSource) return 'summary-row';\r\n    // };\r\n    gantt.templates.task_class = function (start, end, task) {\r\n      if (task.isGroupSource) return 'summary-bar';\r\n    };\r\n    //任务类名设置\r\n    gantt.templates.task_class = function (start, end, task) {\r\n      let className = '';\r\n      if (task.type == gantt.config.types.project)\r\n        className = className + 'hide_project_progress_drag ';\r\n      if (task.isGroupSource) className = className + 'summary-bar ';\r\n      if (task.progress == 0) {\r\n        className = className + 'notStart';\r\n      } else if (0.3 > task.progress > 0) {\r\n        className = className + 'initial';\r\n      } else if (0.8 >= task.progress >= 0.3) {\r\n        className = className + 'inProgress';\r\n      } else if (1 > task.progress > 0.8) {\r\n        className = className + 'finalStage';\r\n      } else if (task.progress == 1) {\r\n        className = className + 'end';\r\n      }\r\n      return className;\r\n    };\r\n    // gantt.templates.progress_text = function (start, end, task) {\r\n    //   return (\r\n    //     \"<span style='float:left;margin-left:10px;color:white;'>\" +\r\n    //     (task.progress * 100).toFixed(2) +\r\n    //     '% </span>'\r\n    //   );\r\n    // };\r\n\r\n    // gantt.templates.task_class = function (start, end, task) {\r\n    //   if (task.type == gantt.config.types.project) return 'hide_project_progress_drag';\r\n    // };\r\n    //撤销\r\n    document.addEventListener('keydown', function (event) {\r\n      if (event.ctrlKey && event.key === 'z') {\r\n        // 检测到用户按下 Ctrl + Z 组合键时，调用撤销函数\r\n        gantt.undo();\r\n      }\r\n    });\r\n    //重做\r\n    document.addEventListener('keydown', function (event) {\r\n      if (event.ctrlKey && event.key === 'y') {\r\n        gantt.redo();\r\n      }\r\n    });\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.summary-row,\r\n.summary-row.odd {\r\n  background-color: #eeeeee;\r\n  font-weight: bold;\r\n}\r\n\r\n.gantt_grid div,\r\n.gantt_data_area div {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n.container {\r\n  height: 100% !important;\r\n}\r\n\r\n#gantt {\r\n  .notStart .gantt_task_progress {\r\n    background-color: #ebedf0;\r\n  }\r\n  .initial .gantt_task_progress {\r\n    background-color: red;\r\n  }\r\n  .inProgress .gantt_task_progress {\r\n    background-color: #3a8cd5;\r\n  }\r\n  .finalStage .gantt_task_progress {\r\n    background-color: #d4673b;\r\n  }\r\n  .end .gantt_task_progress {\r\n    background-color: #7ee048;\r\n  }\r\n\r\n  .summary-bar {\r\n    // opacity: 0.4;\r\n    background-color: #b7dcbb !important;\r\n  }\r\n}\r\n</style>\r\n",
  "项目任务": "项目任务",
  "普通任务": "普通任务",
  "任务状态": "任务状态",
  "未开始": "未开始",
  "进行中": "进行中",
  "已完成": "已完成",
  "已延期": "已延期",
  "搁置中": "搁置中",
  "计划名称": "计划名称",
  "开始时间": "开始时间",
  "持续时间": "持续时间",
  "难度": "难度",
  "关联": "关联",
  "将被删除": "将被删除",
  "任务": "任务",
  "项目": "项目",
  "里程碑": "里程碑",
  "分钟": "分钟",
  "天": "天",
  "年": "年",
  "1月": "1月",
  "2月": "2月",
  "3月": "3月",
  "4月": "4月",
  "5月": "5月",
  "6月": "6月",
  "7月": "7月",
  "8月": "8月",
  "9月": "9月",
  "10月": "10月",
  "11月": "11月",
  "12月": "12月",
  "星期日": "星期日",
  "数据": "数据",
  "是否相同父级": "是否相同父级",
  "任务前": "任务前",
  "最终任务排序": "最终任务排序",
  "上传头像图片只能是 JPG 格式!": "上传头像图片只能是 JPG 格式!",
  "上传头像图片大小不能超过 2MB!": "上传头像图片大小不能超过 2MB!",
  "svg列表": "svg列表",
  "关联网站svg": "关联网站svg",
  "技术栈svg": "技术栈svg",
  "社交svg": "社交svg",
  "音频svg": "音频svg",
  "像素svg": "像素svg",
  "通用svg": "通用svg",
  "svg代码复制成功": "svg代码复制成功",
  "一些小组件": "一些小组件",
  "双击魔方即可开始": "双击魔方即可开始",
  "加载": "加载",
  "表面": "表面",
  "球体": "球体",
  "螺旋": "螺旋",
  "网格": "网格",
  "只是随便接了个api进来玩玩，有很多更成熟的AI网站": "只是随便接了个api进来玩玩，有很多更成熟的AI网站",
  "输入消息...": "输入消息...",
  "思考中": "思考中",
  "发送": "发送",
  "自动滚动": "自动滚动",
  "你": "你",
  "<template>\n  <div class=\"page-main chat-main\" ref=\"messageContainer\">\n    <el-alert\n      :title=\"$t(只是随便接了个api进来玩玩，有很多更成熟的AI网站)\"\n      class=\"alert\"\n      type=\"warning\"\n      show-icon\n    />\n    <div class=\"chat-messages\">\n      <div\n        v-for=\"(message, index) in messages\"\n        :key=\"index\"\n        :class=\"['message-item', message.role]\"\n      >\n        <div class=\"message-header\" v-if=\"message.role !== 'user'\">\n          <div class=\"avatar\">\n            <el-avatar\n              :icon=\"message.role === 'user' ? UserFilled : Service\"\n              :class=\"message.role\"\n            />\n          </div>\n          <div class=\"role-name\">\n            {{ message.role === 'user' ? 你 : 'DeepSeek' }}\n          </div>\n          <div class=\"message-content\" v-if=\"loading && index === messages.length - 1\">\n            <span class=\"loading-dots\">{{ $t(思考中) }}</span>\n          </div>\n        </div>\n        <md-preview\n          v-if=\"message.content\"\n          :editorId=\"'preview-only'\"\n          :modelValue=\"message.content\"\n        />\n        <div\n          class=\"time-count-wrap\"\n          v-if=\"message.role !== 'user' && index != 0 && message.costTime\"\n        >\n          <div class=\"time-count\">\n            {{ `本次回答共耗时${(message.costTime / 1000).toFixed(2)}s` }}\n          </div>\n        </div>\n      </div>\n\n      <!--      &lt;!&ndash; 加载状态 &ndash;&gt;-->\n      <!--      <div class=\"message-item assistant\" v-if=\"loading\">-->\n      <!--        <div class=\"message-header\">-->\n      <!--          <div class=\"avatar\">-->\n      <!--            <el-avatar :icon=\"Service\" class=\"assistant\" />-->\n      <!--          </div>-->\n      <!--          <div class=\"role-name\">DeepSeek</div>-->\n      <!--        </div>-->\n      <!--      </div>-->\n    </div>\n  </div>\n  <!-- 输入区域 -->\n  <div class=\"input-wrapper\">\n    <!--    <rain></rain>-->\n    <div class=\"input-area\">\n      <el-input\n        v-model=\"userInput\"\n        type=\"textarea\"\n        :rows=\"3\"\n        :placeholder=\"$t(输入消息...)\"\n        resize=\"none\"\n        :disabled=\"loading\"\n        @keyup.enter.exact.prevent=\"chatWithAI\"\n      />\n      <div class=\"input-actions\">\n        <el-button\n          type=\"primary\"\n          class=\"send-btn\"\n          :loading=\"loading\"\n          :disabled=\"!userInput.trim()\"\n          @click=\"chatWithAI\"\n        >\n          {{ $t(发送) }}</el-button>\n      </div>\n    </div>\n    <div class=\"setting\">\n      <div class=\"setting-item\">\n        <div class=\"setting-item-label\">{{ $t(自动滚动) }}</div>\n        <el-switch v-model=\"options.scroll\"></el-switch>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, nextTick } from 'vue';\nimport { Service, UserFilled } from '@element-plus/icons-vue';\nimport { sendMessage } from '@/api/chat.ts';\nimport useThemeStore from '@/store/modules/theme.ts';\nimport { ElMessage, ElNotification } from 'element-plus';\nimport rain from '@/views/assembly/slice/rain/index.vue';\nimport { MdPreview } from 'md-editor-v3';\nconst page = ref(null) as any;\nconst options = ref({ scroll: true }) as any;\nconst themeStore = useThemeStore();\nthemeStore.isFooterShow = false;\nimport { debounce } from 'lodash';\n\nthemeStore.isFooterShow = false;\nconst userInput = ref('');\nconst loading = ref(false);\nconst messages = ref([\n  {\n    role: 'assistant',\n    content: '你好！我是 AI小助手，有什么我可以帮你的吗？'\n  }\n]) as any;\n\n// 发送消息\nasync function chatWithAI() {\n  const start = performance.now();\n  if (!userInput.value.trim() || loading.value) return;\n  const userMessage = {\n    role: 'user',\n    content: userInput.value\n  };\n  messages.value.push(userMessage);\n  userInput.value = '';\n  loading.value = true;\n  await scrollToBottom();\n\n  try {\n    const assistantMessage = {\n      role: 'assistant',\n      content: '' // 初始内容为空\n    };\n    const response = (await sendMessage(messages.value)) as any;\n    if (response.status !== 200) {\n      ElNotification.error('API returned an error');\n    }\n    if (!response.body) return;\n    //接收数据流\n    const decoder = new TextDecoder('utf-8');\n    const reader = response.body.getReader();\n    let index = 0;\n    messages.value.push(assistantMessage);\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) {\n        break;\n      }\n      const chunk = decoder.decode(value);\n      const lines = chunk.split('data: ').slice(1); // 分组并处理掉返回中的data:\n      const parsedLines = lines\n        .map(line => line.trim()) // 去空格\n        .filter(line => line !== ''); // 去掉空行\n      for (const parsedLine of parsedLines) {\n        index++;\n        //循环返回的字段\n        if (parsedLine.includes('choices')) {\n          // 返回数据为合理数据判断\n          const { choices } = JSON.parse(parsedLine);\n          const { delta } = choices[0];\n          const { content } = delta;\n          if (content && index > 4) {\n            // 文本 处理\n            messages.value[messages.value.length - 1].content += content;\n            console.log(文本:, content, options.value.scroll);\n            if (options.value.scroll) {\n              scrollToBottom();\n            }\n          }\n        }\n      }\n    }\n    if (!messages.value[messages.value.length - 1].content) {\n      messages.value[messages.value.length - 1].content = 'api请求失败,请联系管理员';\n    }\n    loading.value = false;\n    const end = performance.now();\n    messages.value[messages.value.length - 1].costTime = end - start;\n    // console.log(`函数执行时间为: ${timeDiff} 毫秒`);\n  } catch (error) {\n    ElMessage.error(消息发送失败，请重试);\n    loading.value = false;\n  }\n}\n\n// 滚动到底部\nconst scrollToBottom = async () => {\n  await nextTick();\n  page.value.scrollTo({ top: page.value.scrollHeight, behavior: 'smooth' });\n};\n\nonMounted(() => {\n  page.value = document.querySelector('.el-main') as any;\n  scrollToBottom();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@include theme() {\n  .chat-main {\n    max-width: 1000px !important;\n    height: auto;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n    background: get('back') !important;\n  }\n  .md-editor-previewOnly {\n    border: 1px solid get('border-color');\n    //box-shadow: get('box-shadow');\n    padding: 0.5rem;\n    border-radius: 6px;\n    text-align: left;\n  }\n  .user {\n    display: flex;\n    justify-content: end;\n    :deep(.md-editor-preview-wrapper) {\n      padding: 0 20px !important;\n    }\n    .md-editor-previewOnly {\n      text-align: right;\n      background: #eff6ff;\n      width: fit-content;\n      border-radius: 15px;\n      border: none;\n\n      .md-editor-preview-wrapper {\n        width: fit-content;\n        padding: 0 20px !important;\n      }\n    }\n  }\n  .input-wrapper {\n    //border-top: 1px solid #e5e7eb;\n    box-shadow: get('box-shadow');\n    background-color: #ffffff;\n    position: fixed;\n    bottom: 0;\n    z-index: 10;\n    width: 100vw;\n    display: flex;\n    justify-content: center;\n    //.rain {\n    //  position: absolute;\n    //}\n    .input-area {\n      //box-shadow: inset 1px 1px 3px rgba(255, 255, 255, 0.3);\n      overflow: hidden;\n    }\n  }\n}\n.alert {\n  margin: 48px 48px 0px 48px;\n  width: calc(100% - 96px);\n}\n.chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 0;\n  margin-bottom: 130px;\n  .message-item {\n    padding: 24px 48px;\n\n    &.assistant {\n      //background-color: #f9fafb;\n    }\n\n    .message-header {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      margin-bottom: 12px;\n      position: relative;\n      .avatar {\n        .el-avatar {\n          width: 24px;\n          height: 24px;\n          border-radius: 4px;\n\n          &.user {\n            background-color: #2970ff;\n          }\n\n          &.assistant {\n            background-color: #10b981;\n          }\n        }\n      }\n\n      .role-name {\n        font-size: 14px;\n        font-weight: 500;\n        color: #1f2937;\n      }\n    }\n\n    .message-content {\n      color: #1f2937;\n      line-height: 1.6;\n      font-size: 15px;\n      position: absolute;\n      left: calc(50% - 25px);\n      :deep(p) {\n        margin: 0.8em 0;\n\n        &:first-child {\n          margin-top: 0;\n        }\n\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n\n      :deep(pre) {\n        background-color: #f3f4f6;\n        padding: 16px;\n        border-radius: 8px;\n        margin: 1em 0;\n        position: relative;\n\n        code {\n          background: none;\n          padding: 0;\n          border-radius: 0;\n          font-family: 'Fira Code', monospace;\n        }\n\n        &:hover {\n          .copy-btn {\n            opacity: 1;\n          }\n        }\n      }\n\n      :deep(code) {\n        background-color: #f3f4f6;\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 0.9em;\n        font-family: 'Fira Code', monospace;\n      }\n    }\n  }\n}\n\n.input-area {\n  //max-width: 768px;\n  margin: 24px 0;\n  display: flex;\n  justify-content: center;\n  position: relative;\n  width: 920px;\n  border-radius: 12px;\n  :deep(.el-textarea__inner) {\n    padding: 12px 100px 12px 16px;\n    font-size: 15px;\n    line-height: 1.6;\n    border-radius: 12px;\n    //border-color: #e5e7eb;\n    resize: none;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n    background: #f3f4f6 !important;\n    //color: #fff !important;\n    &:focus {\n      border-color: #2970ff;\n      box-shadow: 0 0 0 3px rgba(41, 112, 255, 0.1);\n    }\n\n    &:disabled {\n      background-color: #f9fafb;\n      cursor: not-allowed;\n    }\n  }\n\n  .input-actions {\n    position: absolute;\n    right: 12px;\n    bottom: 12px;\n\n    .send-btn {\n      height: 32px;\n      padding: 0 16px;\n      background-color: #2970ff;\n      border: none;\n\n      &:hover:not(:disabled) {\n        background-color: #1b62ff;\n      }\n\n      &:disabled {\n        background-color: #e5e7eb;\n        cursor: not-allowed;\n      }\n    }\n  }\n}\n\n.loading-dots {\n  display: inline-block;\n  color: #6b7280;\n\n  &::after {\n    content: '';\n    animation: dots 1.4s infinite;\n  }\n}\n\n@keyframes dots {\n  0%,\n  20% {\n    content: '.';\n  }\n  40% {\n    content: '..';\n  }\n  60%,\n  100% {\n    content: '...';\n  }\n}\n\n// 自定义滚动条\n::-webkit-scrollbar {\n  width: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background-color: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: #d1d5db;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: #9ca3af;\n  }\n}\n\n// 代码块复制按钮\n.copy-btn {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  opacity: 0;\n  transition: opacity 0.2s;\n  padding: 4px 8px;\n  background-color: #ffffff;\n  border: 1px solid #e5e7eb;\n  border-radius: 4px;\n  font-size: 12px;\n  color: #6b7280;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f9fafb;\n    color: #1f2937;\n  }\n}\n.time-count-wrap {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: end;\n  margin-top: 10px;\n}\n.time-count {\n  border-radius: 5px;\n  background: #827c83;\n  width: fit-content;\n  font-size: 0.7rem;\n  padding: 5px 10px;\n  color: white;\n}\n.setting {\n  width: 120px;\n  position: absolute;\n  right: 20px;\n  font-size: 0.8rem;\n  bottom: 15px;\n  .setting-item {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n}\n</style>\n": "<template>\n  <div class=\"page-main chat-main\" ref=\"messageContainer\">\n    <el-alert\n      :title=\"$t(只是随便接了个api进来玩玩，有很多更成熟的AI网站)\"\n      class=\"alert\"\n      type=\"warning\"\n      show-icon\n    />\n    <div class=\"chat-messages\">\n      <div\n        v-for=\"(message, index) in messages\"\n        :key=\"index\"\n        :class=\"['message-item', message.role]\"\n      >\n        <div class=\"message-header\" v-if=\"message.role !== 'user'\">\n          <div class=\"avatar\">\n            <el-avatar\n              :icon=\"message.role === 'user' ? UserFilled : Service\"\n              :class=\"message.role\"\n            />\n          </div>\n          <div class=\"role-name\">\n            {{ message.role === 'user' ? 你 : 'DeepSeek' }}\n          </div>\n          <div class=\"message-content\" v-if=\"loading && index === messages.length - 1\">\n            <span class=\"loading-dots\">{{ $t(思考中) }}</span>\n          </div>\n        </div>\n        <md-preview\n          v-if=\"message.content\"\n          :editorId=\"'preview-only'\"\n          :modelValue=\"message.content\"\n        />\n        <div\n          class=\"time-count-wrap\"\n          v-if=\"message.role !== 'user' && index != 0 && message.costTime\"\n        >\n          <div class=\"time-count\">\n            {{ `本次回答共耗时${(message.costTime / 1000).toFixed(2)}s` }}\n          </div>\n        </div>\n      </div>\n\n      <!--      &lt;!&ndash; 加载状态 &ndash;&gt;-->\n      <!--      <div class=\"message-item assistant\" v-if=\"loading\">-->\n      <!--        <div class=\"message-header\">-->\n      <!--          <div class=\"avatar\">-->\n      <!--            <el-avatar :icon=\"Service\" class=\"assistant\" />-->\n      <!--          </div>-->\n      <!--          <div class=\"role-name\">DeepSeek</div>-->\n      <!--        </div>-->\n      <!--      </div>-->\n    </div>\n  </div>\n  <!-- 输入区域 -->\n  <div class=\"input-wrapper\">\n    <!--    <rain></rain>-->\n    <div class=\"input-area\">\n      <el-input\n        v-model=\"userInput\"\n        type=\"textarea\"\n        :rows=\"3\"\n        :placeholder=\"$t(输入消息...)\"\n        resize=\"none\"\n        :disabled=\"loading\"\n        @keyup.enter.exact.prevent=\"chatWithAI\"\n      />\n      <div class=\"input-actions\">\n        <el-button\n          type=\"primary\"\n          class=\"send-btn\"\n          :loading=\"loading\"\n          :disabled=\"!userInput.trim()\"\n          @click=\"chatWithAI\"\n        >\n          {{ $t(发送) }}</el-button>\n      </div>\n    </div>\n    <div class=\"setting\">\n      <div class=\"setting-item\">\n        <div class=\"setting-item-label\">{{ $t(自动滚动) }}</div>\n        <el-switch v-model=\"options.scroll\"></el-switch>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, nextTick } from 'vue';\nimport { Service, UserFilled } from '@element-plus/icons-vue';\nimport { sendMessage } from '@/api/chat.ts';\nimport useThemeStore from '@/store/modules/theme.ts';\nimport { ElMessage, ElNotification } from 'element-plus';\nimport rain from '@/views/assembly/slice/rain/index.vue';\nimport { MdPreview } from 'md-editor-v3';\nconst page = ref(null) as any;\nconst options = ref({ scroll: true }) as any;\nconst themeStore = useThemeStore();\nthemeStore.isFooterShow = false;\nimport { debounce } from 'lodash';\n\nthemeStore.isFooterShow = false;\nconst userInput = ref('');\nconst loading = ref(false);\nconst messages = ref([\n  {\n    role: 'assistant',\n    content: '你好！我是 AI小助手，有什么我可以帮你的吗？'\n  }\n]) as any;\n\n// 发送消息\nasync function chatWithAI() {\n  const start = performance.now();\n  if (!userInput.value.trim() || loading.value) return;\n  const userMessage = {\n    role: 'user',\n    content: userInput.value\n  };\n  messages.value.push(userMessage);\n  userInput.value = '';\n  loading.value = true;\n  await scrollToBottom();\n\n  try {\n    const assistantMessage = {\n      role: 'assistant',\n      content: '' // 初始内容为空\n    };\n    const response = (await sendMessage(messages.value)) as any;\n    if (response.status !== 200) {\n      ElNotification.error('API returned an error');\n    }\n    if (!response.body) return;\n    //接收数据流\n    const decoder = new TextDecoder('utf-8');\n    const reader = response.body.getReader();\n    let index = 0;\n    messages.value.push(assistantMessage);\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) {\n        break;\n      }\n      const chunk = decoder.decode(value);\n      const lines = chunk.split('data: ').slice(1); // 分组并处理掉返回中的data:\n      const parsedLines = lines\n        .map(line => line.trim()) // 去空格\n        .filter(line => line !== ''); // 去掉空行\n      for (const parsedLine of parsedLines) {\n        index++;\n        //循环返回的字段\n        if (parsedLine.includes('choices')) {\n          // 返回数据为合理数据判断\n          const { choices } = JSON.parse(parsedLine);\n          const { delta } = choices[0];\n          const { content } = delta;\n          if (content && index > 4) {\n            // 文本 处理\n            messages.value[messages.value.length - 1].content += content;\n            console.log(文本:, content, options.value.scroll);\n            if (options.value.scroll) {\n              scrollToBottom();\n            }\n          }\n        }\n      }\n    }\n    if (!messages.value[messages.value.length - 1].content) {\n      messages.value[messages.value.length - 1].content = 'api请求失败,请联系管理员';\n    }\n    loading.value = false;\n    const end = performance.now();\n    messages.value[messages.value.length - 1].costTime = end - start;\n    // console.log(`函数执行时间为: ${timeDiff} 毫秒`);\n  } catch (error) {\n    ElMessage.error(消息发送失败，请重试);\n    loading.value = false;\n  }\n}\n\n// 滚动到底部\nconst scrollToBottom = async () => {\n  await nextTick();\n  page.value.scrollTo({ top: page.value.scrollHeight, behavior: 'smooth' });\n};\n\nonMounted(() => {\n  page.value = document.querySelector('.el-main') as any;\n  scrollToBottom();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@include theme() {\n  .chat-main {\n    max-width: 1000px !important;\n    height: auto;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n    background: get('back') !important;\n  }\n  .md-editor-previewOnly {\n    border: 1px solid get('border-color');\n    //box-shadow: get('box-shadow');\n    padding: 0.5rem;\n    border-radius: 6px;\n    text-align: left;\n  }\n  .user {\n    display: flex;\n    justify-content: end;\n    :deep(.md-editor-preview-wrapper) {\n      padding: 0 20px !important;\n    }\n    .md-editor-previewOnly {\n      text-align: right;\n      background: #eff6ff;\n      width: fit-content;\n      border-radius: 15px;\n      border: none;\n\n      .md-editor-preview-wrapper {\n        width: fit-content;\n        padding: 0 20px !important;\n      }\n    }\n  }\n  .input-wrapper {\n    //border-top: 1px solid #e5e7eb;\n    box-shadow: get('box-shadow');\n    background-color: #ffffff;\n    position: fixed;\n    bottom: 0;\n    z-index: 10;\n    width: 100vw;\n    display: flex;\n    justify-content: center;\n    //.rain {\n    //  position: absolute;\n    //}\n    .input-area {\n      //box-shadow: inset 1px 1px 3px rgba(255, 255, 255, 0.3);\n      overflow: hidden;\n    }\n  }\n}\n.alert {\n  margin: 48px 48px 0px 48px;\n  width: calc(100% - 96px);\n}\n.chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 0;\n  margin-bottom: 130px;\n  .message-item {\n    padding: 24px 48px;\n\n    &.assistant {\n      //background-color: #f9fafb;\n    }\n\n    .message-header {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      margin-bottom: 12px;\n      position: relative;\n      .avatar {\n        .el-avatar {\n          width: 24px;\n          height: 24px;\n          border-radius: 4px;\n\n          &.user {\n            background-color: #2970ff;\n          }\n\n          &.assistant {\n            background-color: #10b981;\n          }\n        }\n      }\n\n      .role-name {\n        font-size: 14px;\n        font-weight: 500;\n        color: #1f2937;\n      }\n    }\n\n    .message-content {\n      color: #1f2937;\n      line-height: 1.6;\n      font-size: 15px;\n      position: absolute;\n      left: calc(50% - 25px);\n      :deep(p) {\n        margin: 0.8em 0;\n\n        &:first-child {\n          margin-top: 0;\n        }\n\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n\n      :deep(pre) {\n        background-color: #f3f4f6;\n        padding: 16px;\n        border-radius: 8px;\n        margin: 1em 0;\n        position: relative;\n\n        code {\n          background: none;\n          padding: 0;\n          border-radius: 0;\n          font-family: 'Fira Code', monospace;\n        }\n\n        &:hover {\n          .copy-btn {\n            opacity: 1;\n          }\n        }\n      }\n\n      :deep(code) {\n        background-color: #f3f4f6;\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 0.9em;\n        font-family: 'Fira Code', monospace;\n      }\n    }\n  }\n}\n\n.input-area {\n  //max-width: 768px;\n  margin: 24px 0;\n  display: flex;\n  justify-content: center;\n  position: relative;\n  width: 920px;\n  border-radius: 12px;\n  :deep(.el-textarea__inner) {\n    padding: 12px 100px 12px 16px;\n    font-size: 15px;\n    line-height: 1.6;\n    border-radius: 12px;\n    //border-color: #e5e7eb;\n    resize: none;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n    background: #f3f4f6 !important;\n    //color: #fff !important;\n    &:focus {\n      border-color: #2970ff;\n      box-shadow: 0 0 0 3px rgba(41, 112, 255, 0.1);\n    }\n\n    &:disabled {\n      background-color: #f9fafb;\n      cursor: not-allowed;\n    }\n  }\n\n  .input-actions {\n    position: absolute;\n    right: 12px;\n    bottom: 12px;\n\n    .send-btn {\n      height: 32px;\n      padding: 0 16px;\n      background-color: #2970ff;\n      border: none;\n\n      &:hover:not(:disabled) {\n        background-color: #1b62ff;\n      }\n\n      &:disabled {\n        background-color: #e5e7eb;\n        cursor: not-allowed;\n      }\n    }\n  }\n}\n\n.loading-dots {\n  display: inline-block;\n  color: #6b7280;\n\n  &::after {\n    content: '';\n    animation: dots 1.4s infinite;\n  }\n}\n\n@keyframes dots {\n  0%,\n  20% {\n    content: '.';\n  }\n  40% {\n    content: '..';\n  }\n  60%,\n  100% {\n    content: '...';\n  }\n}\n\n// 自定义滚动条\n::-webkit-scrollbar {\n  width: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background-color: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: #d1d5db;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: #9ca3af;\n  }\n}\n\n// 代码块复制按钮\n.copy-btn {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  opacity: 0;\n  transition: opacity 0.2s;\n  padding: 4px 8px;\n  background-color: #ffffff;\n  border: 1px solid #e5e7eb;\n  border-radius: 4px;\n  font-size: 12px;\n  color: #6b7280;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #f9fafb;\n    color: #1f2937;\n  }\n}\n.time-count-wrap {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: end;\n  margin-top: 10px;\n}\n.time-count {\n  border-radius: 5px;\n  background: #827c83;\n  width: fit-content;\n  font-size: 0.7rem;\n  padding: 5px 10px;\n  color: white;\n}\n.setting {\n  width: 120px;\n  position: absolute;\n  right: 20px;\n  font-size: 0.8rem;\n  bottom: 15px;\n  .setting-item {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n}\n</style>\n",
  "消息发送失败，请重试": "消息发送失败，请重试",
  "本次回答共耗时": "本次回答共耗时",
  "函数执行时间为: ": "函数执行时间为: ",
  " 毫秒": " 毫秒",
  "编辑博客": "编辑博客",
  "我的博客": "我的博客",
  "修改记录": "修改记录",
  "元素进入视野": "元素进入视野",
  "上传失败": "上传失败",
  "图片上传失败": "图片上传失败",
  "目标1": "目标1",
  "目标2": "目标2",
  "目标3": "目标3",
  "目标4": "目标4",
  "请输入": "请输入",
  "这是一个测试组件": "这是一个测试组件",
  "测试传入变量": "测试传入变量",
  "默认值": "默认值",
  "复制地址": "复制地址",
  "重新加载": "重新加载",
  "关于网站": "关于网站",
  "上一页": "上一页",
  "下一页": "下一页",
  "第": "第",
  "页": "页",
  "加载中...": "加载中...",
  "更多": "更多",
  "对齐": "对齐",
  "缩进": "缩进",
  "视频": "视频",
  "目录": "目录",
  "请为操作按钮添加点击事件": "请为操作按钮添加点击事件",
  "是否确认删除选中数据?": "是否确认删除选中数据?",
  "删除成功": "删除成功",
  "列控制": "列控制",
  "隐藏搜索": "隐藏搜索",
  "显示搜索": "显示搜索",
  "结束时间": "结束时间",
  "隐藏某列后剩余列没有对齐是因为没有设置auto宽度": "隐藏某列后剩余列没有对齐是因为没有设置auto宽度",
  "列名": "列名",
  "宽度": "宽度",
  "固定": "固定",
  "隐藏": "隐藏",
  "左": "左",
  "无": "无",
  "右": "右",
  "博主": "博主",
  "网址": "网址",
  "表情-魔鬼怒": "表情-魔鬼怒",
  "表情-魔鬼笑": "表情-魔鬼笑",
  "评论发布成功": "评论发布成功",
  "个人信息": "个人信息",
  "项目经历": "项目经历",
  "随笔": "随笔",
  "相册": "相册",
  "试验田": "试验田",
  "影视": "影视",
  "美食": "美食",
  "深色": "深色",
  "棕黄": "棕黄",
  "白色": "白色",
  "青色": "青色",
  "刀隶体": "刀隶体",
  "东方大楷": "东方大楷",
  "钉钉进步体": "钉钉进步体",
  "天王星像素": "天王星像素",
  "优设鲨鱼菲特健康体": "优设鲨鱼菲特健康体",
  "宋体": "宋体",
  "黑体": "黑体",
  "微软雅黑": "微软雅黑",
  "隶书": "隶书",
  "仿宋": "仿宋",
  "楷体": "楷体",
  "雅黑": "雅黑",
  "贴片机文件采集驱动": "贴片机文件采集驱动",
  "贴片机信息采集程序，支持驱动在线上传和在线安装，打包成exe文件运行": "贴片机信息采集程序，支持驱动在线上传和在线安装，打包成exe文件运行",
  "多个型号贴片机的适配": "多个型号贴片机的适配",
  "雅马哈，西门子，松下等贴片机的读取和计算逻辑适配，包括分布式服务器读取情况适配": "雅马哈，西门子，松下等贴片机的读取和计算逻辑适配，包括分布式服务器读取情况适配",
  "贴片机型号与版本不同，文件访问方式也不一致，需要做相应处理，后将长连接方式改为短连接方式，保持长连接容易出现一些难以预测的问题，当然主要是这个程序本身面对的负载并不大": "贴片机型号与版本不同，文件访问方式也不一致，需要做相应处理，后将长连接方式改为短连接方式，保持长连接容易出现一些难以预测的问题，当然主要是这个程序本身面对的负载并不大",
  "嵌套线程处理": "嵌套线程处理",
  "现场问题的长期支持": "现场问题的长期支持",
  "实施人员在使用过程中，会遇到各种各样的问题，需要及时解决。": "实施人员在使用过程中，会遇到各种各样的问题，需要及时解决。",
  "云标签打印系统": "云标签打印系统",
  "配合MES系统的子工程": "配合MES系统的子工程",
  "与MES主工程的定时数据交互": "与MES主工程的定时数据交互",
  "通过定时任务交换订单、标签等数据的信息": "通过定时任务交换订单、标签等数据的信息",
  "标签打印": "标签打印",
  "按设计好的标签模板，处理标签数据逻辑": "按设计好的标签模板，处理标签数据逻辑",
  "部分前端工作": "部分前端工作",
  "贴片机文件采集驱动的升级版本，流程可视化，日志可视化，动态导入，网关监控": "贴片机文件采集驱动的升级版本，流程可视化，日志可视化，动态导入，网关监控",
  "新增多种节点": "新增多种节点",
  "使用Jquery和nodeJs开发SFTP文件轮询，文件监听，文件解析等新节点": "使用Jquery和nodeJs开发SFTP文件轮询，文件监听，文件解析等新节点",
  "贴片机文件采集流程设计": "贴片机文件采集流程设计",
  "适配多机器的采集流程设计": "适配多机器的采集流程设计",
  "大批量文件采集处理": "大批量文件采集处理",
  "不同于常规贴片机文件采集，存在特殊的大批量文件采集过站情况，需从多个文件服务器的成百上千个目录下监听文件，": "不同于常规贴片机文件采集，存在特殊的大批量文件采集过站情况，需从多个文件服务器的成百上千个目录下监听文件，",
  "需要预防某些服务器掉线、网络波动等问题，添加监听分段式重启机制，添加监听防抖，添加定时更新解析方案机制，": "需要预防某些服务器掉线、网络波动等问题，添加监听分段式重启机制，添加监听防抖，添加定时更新解析方案机制，",
  "需求是像微服务一样，每个模块都可以独立部署，采用无界框架实现，完成框架后移交给其他部门开发": "需求是像微服务一样，每个模块都可以独立部署，采用无界框架实现，完成框架后移交给其他部门开发",
  "前端架构": "前端架构",
  "前端整体架构，包括技术栈选型，不同模块项目间的通信和组合，通用模块的抽取，以及快捷启动方式等": "前端整体架构，包括技术栈选型，不同模块项目间的通信和组合，通用模块的抽取，以及快捷启动方式等",
  "全域价值流": "全域价值流",
  "应客户要求使用Sz-Admin框架，接口由客户方提供，比较奇葩的是还需要给客户代码说明文档，客户以后要将这个框架自用": "应客户要求使用Sz-Admin框架，接口由客户方提供，比较奇葩的是还需要给客户代码说明文档，客户以后要将这个框架自用",
  "全部前端工作": "全部前端工作",
  "代码说明文档": "代码说明文档",
  "客户方需要根据Sz-Admin框架的使用说明，编写代码说明文档": "客户方需要根据Sz-Admin框架的使用说明，编写代码说明文档",
  "SMT精灵": "SMT精灵",
  "集成到小主机的单体服务项目，用于工厂管理": "集成到小主机的单体服务项目，用于工厂管理",
  "各种模块控制台": "各种模块控制台",
  "启动构建速度优化": "启动构建速度优化",
  "国际化": "国际化",
  "看板": "看板",
  "贴片机信息统计": "贴片机信息统计",
  "使用uni-app开发，配合smt精灵使用的手机端": "使用uni-app开发，配合smt精灵使用的手机端",
  "整体架构": "整体架构",
  "前端uni-app，后端通过sse连接与主smt精灵主工程连通": "前端uni-app，后端通过sse连接与主smt精灵主工程连通",
  "微信对接": "微信对接",
  "接入微信api，可通过手机端向微信发送模板信息": "接入微信api，可通过手机端向微信发送模板信息",
  "动态导航": "动态导航",
  "可动态设置下方导航菜单": "可动态设置下方导航菜单",
  "统计图表": "统计图表",
  "适配手机端的图表": "适配手机端的图表",
  "多服务工厂管理系统，适配SQLServer和PG数据库，已经较为完整，偶尔处理一些bug和小需求": "多服务工厂管理系统，适配SQLServer和PG数据库，已经较为完整，偶尔处理一些bug和小需求",
  "多功能甘特图": "多功能甘特图",
  "使用dhtmlx-gantt插件，补充了批量移动等功能": "使用dhtmlx-gantt插件，补充了批量移动等功能",
  "维护": "维护",
  "部分bug修复": "部分bug修复",
  "通过qiankun微前端框架整合多个不同技术栈项目，包含vue2和vue3项目": "通过qiankun微前端框架整合多个不同技术栈项目，包含vue2和vue3项目",
  "qiankun框架项目整合": "qiankun框架项目整合",
  "处理不同项目的公用信息，沙盒隔离和路由调度": "处理不同项目的公用信息，沙盒隔离和路由调度",
  "低代码": "低代码",
  "结合动态表单，实现快速生成常规列表页面并进行版本管理": "结合动态表单，实现快速生成常规列表页面并进行版本管理",
  "大屏报表": "大屏报表",
  "连通低代码接口库，可快速生成动态看板": "连通低代码接口库，可快速生成动态看板",
  "多种接口类型库": "多种接口类型库",
  "支持api接口(非本系统会有后端服务代理转发)，apiJson接口，静态数据接口，sql接口(mybatisPlus)": "支持api接口(非本系统会有后端服务代理转发)，apiJson接口，静态数据接口，sql接口(mybatisPlus)",
  "常规页面生成": "常规页面生成",
  "常规表单设计，支持表单嵌套，结合动态菜单实现在线发布和版本管理": "常规表单设计，支持表单嵌套，结合动态菜单实现在线发布和版本管理",
  "数据库自行配置模式pg和sqlserver双数据库适配": "数据库自行配置模式pg和sqlserver双数据库适配",
  "本质是拼接sql字符串，中转执行sql": "本质是拼接sql字符串，中转执行sql",
  "快速生成动态看板": "快速生成动态看板",
  "连通低代码接口库，改造所有图表组件，实现快速生成动态看板": "连通低代码接口库，改造所有图表组件，实现快速生成动态看板",
  "组件补充": "组件补充",
  "补充表格下拉框等组件": "补充表格下拉框等组件",
  "专门的看板项目，我只负责前端": "专门的看板项目，我只负责前端",
  "所有前端工作": "所有前端工作",
  "SMS备件管理系统": "SMS备件管理系统",
  "工厂管理的一个特殊模块，稍微改了几个接口，略过": "工厂管理的一个特殊模块，稍微改了几个接口，略过",
  "CMS样品管理系统": "CMS样品管理系统",
  "工厂管理的一个特殊模块，同样只是稍微改了几个接口，略过": "工厂管理的一个特殊模块，同样只是稍微改了几个接口，略过",
  "问题解决工具": "问题解决工具",
  "一个比较老的项目，后端似乎用的.net，只改了几个前端问题，略过": "一个比较老的项目，后端似乎用的.net，只改了几个前端问题，略过",
  "个人网站": "个人网站",
  "请查看c-site-v2的项目介绍": "请查看c-site-v2的项目介绍",
  "个人网站-微服务版": "个人网站-微服务版",
  "微服务测试版本，本来是拿来测试集群和微服务，但是轻量服务器实在是在不堪大用，开了两个nacos和几个基础服务就爆了，最后只能强行限制资源占用，勉勉强强测试一下": "微服务测试版本，本来是拿来测试集群和微服务，但是轻量服务器实在是在不堪大用，开了两个nacos和几个基础服务就爆了，最后只能强行限制资源占用，勉勉强强测试一下",
  "个人网站-v2": "个人网站-v2",
  "都在这个网站了": "都在这个网站了",
  "桌面端工具集": "桌面端工具集",
  "北京": "北京",
  "朝阳": "朝阳",
  "顺义": "顺义",
  "怀柔": "怀柔",
  "通州": "通州",
  "昌平": "昌平",
  "延庆": "延庆",
  "丰台": "丰台",
  "石景山": "石景山",
  "大兴": "大兴",
  "房山": "房山",
  "密云": "密云",
  "门头沟": "门头沟",
  "平谷": "平谷",
  "八达岭": "八达岭",
  "佛爷顶": "佛爷顶",
  "汤河口": "汤河口",
  "密云上甸子": "密云上甸子",
  "斋堂": "斋堂",
  "霞云岭": "霞云岭",
  "北京城区": "北京城区",
  "海淀": "海淀",
  "天津市": "天津市",
  "天津": "天津",
  "宝坻": "宝坻",
  "东丽": "东丽",
  "西青": "西青",
  "北辰": "北辰",
  "蓟县": "蓟县",
  "汉沽": "汉沽",
  "静海": "静海",
  "津南": "津南",
  "塘沽": "塘沽",
  "大港": "大港",
  "武清": "武清",
  "宁河": "宁河",
  "上海": "上海",
  "宝山": "宝山",
  "嘉定": "嘉定",
  "南汇": "南汇",
  "浦东": "浦东",
  "青浦": "青浦",
  "松江": "松江",
  "奉贤": "奉贤",
  "崇明": "崇明",
  "徐家汇": "徐家汇",
  "闵行": "闵行",
  "金山": "金山",
  "河北": "河北",
  "石家庄": "石家庄",
  "张家口": "张家口",
  "承德": "承德",
  "唐山": "唐山",
  "秦皇岛": "秦皇岛",
  "沧州": "沧州",
  "衡水": "衡水",
  "邢台": "邢台",
  "邯郸": "邯郸",
  "保定": "保定",
  "廊坊": "廊坊",
  "河南": "河南",
  "郑州": "郑州",
  "新乡": "新乡",
  "许昌": "许昌",
  "平顶山": "平顶山",
  "信阳": "信阳",
  "南阳": "南阳",
  "开封": "开封",
  "洛阳": "洛阳",
  "商丘": "商丘",
  "焦作": "焦作",
  "鹤壁": "鹤壁",
  "濮阳": "濮阳",
  "周口": "周口",
  "漯河": "漯河",
  "驻马店": "驻马店",
  "三门峡": "三门峡",
  "济源": "济源",
  "安阳": "安阳",
  "安徽": "安徽",
  "合肥": "合肥",
  "芜湖": "芜湖",
  "淮南": "淮南",
  "马鞍山": "马鞍山",
  "安庆": "安庆",
  "宿州": "宿州",
  "阜阳": "阜阳",
  "亳州": "亳州",
  "黄山": "黄山",
  "滁州": "滁州",
  "淮北": "淮北",
  "铜陵": "铜陵",
  "宣城": "宣城",
  "六安": "六安",
  "巢湖": "巢湖",
  "池州": "池州",
  "蚌埠": "蚌埠",
  "浙江": "浙江",
  "杭州": "杭州",
  "舟山": "舟山",
  "湖州": "湖州",
  "嘉兴": "嘉兴",
  "金华": "金华",
  "绍兴": "绍兴",
  "台州": "台州",
  "温州": "温州",
  "丽水": "丽水",
  "衢州": "衢州",
  "宁波": "宁波",
  "重庆": "重庆",
  "合川": "合川",
  "南川": "南川",
  "江津": "江津",
  "万盛": "万盛",
  "渝北": "渝北",
  "北碚": "北碚",
  "巴南": "巴南",
  "长寿": "长寿",
  "黔江": "黔江",
  "万州天城": "万州天城",
  "万州龙宝": "万州龙宝",
  "涪陵": "涪陵",
  "开县": "开县",
  "城口": "城口",
  "云阳": "云阳",
  "巫溪": "巫溪",
  "奉节": "奉节",
  "巫山": "巫山",
  "潼南": "潼南",
  "垫江": "垫江",
  "梁平": "梁平",
  "忠县": "忠县",
  "石柱": "石柱",
  "大足": "大足",
  "荣昌": "荣昌",
  "铜梁": "铜梁",
  "璧山": "璧山",
  "丰都": "丰都",
  "武隆": "武隆",
  "彭水": "彭水",
  "綦江": "綦江",
  "酉阳": "酉阳",
  "秀山": "秀山",
  "沙坪坝": "沙坪坝",
  "永川": "永川",
  "福建": "福建",
  "福州": "福州",
  "泉州": "泉州",
  "漳州": "漳州",
  "龙岩": "龙岩",
  "晋江": "晋江",
  "南平": "南平",
  "厦门": "厦门",
  "宁德": "宁德",
  "莆田": "莆田",
  "三明": "三明",
  "甘肃": "甘肃",
  "兰州": "兰州",
  "平凉": "平凉",
  "庆阳": "庆阳",
  "武威": "武威",
  "金昌": "金昌",
  "嘉峪关": "嘉峪关",
  "酒泉": "酒泉",
  "天水": "天水",
  "武都": "武都",
  "临夏": "临夏",
  "合作": "合作",
  "白银": "白银",
  "定西": "定西",
  "张掖": "张掖",
  "广东": "广东",
  "广州": "广州",
  "惠州": "惠州",
  "梅州": "梅州",
  "汕头": "汕头",
  "深圳": "深圳",
  "珠海": "珠海",
  "佛山": "佛山",
  "肇庆": "肇庆",
  "湛江": "湛江",
  "江门": "江门",
  "河源": "河源",
  "清远": "清远",
  "云浮": "云浮",
  "潮州": "潮州",
  "东莞": "东莞",
  "中山": "中山",
  "阳江": "阳江",
  "揭阳": "揭阳",
  "茂名": "茂名",
  "汕尾": "汕尾",
  "韶关": "韶关",
  "广西": "广西",
  "南宁": "南宁",
  "柳州": "柳州",
  "来宾": "来宾",
  "桂林": "桂林",
  "梧州": "梧州",
  "防城港": "防城港",
  "贵港": "贵港",
  "玉林": "玉林",
  "百色": "百色",
  "钦州": "钦州",
  "河池": "河池",
  "北海": "北海",
  "崇左": "崇左",
  "贺州": "贺州",
  "贵州": "贵州",
  "贵阳": "贵阳",
  "安顺": "安顺",
  "都匀": "都匀",
  "兴义": "兴义",
  "铜仁": "铜仁",
  "毕节": "毕节",
  "六盘水": "六盘水",
  "遵义": "遵义",
  "凯里": "凯里",
  "云南": "云南",
  "昆明": "昆明",
  "红河": "红河",
  "文山": "文山",
  "玉溪": "玉溪",
  "楚雄": "楚雄",
  "普洱": "普洱",
  "昭通": "昭通",
  "临沧": "临沧",
  "怒江": "怒江",
  "香格里拉": "香格里拉",
  "丽江": "丽江",
  "德宏": "德宏",
  "景洪": "景洪",
  "大理": "大理",
  "曲靖": "曲靖",
  "保山": "保山",
  "内蒙古": "内蒙古",
  "呼和浩特": "呼和浩特",
  "乌海": "乌海",
  "集宁": "集宁",
  "通辽": "通辽",
  "阿拉善左旗": "阿拉善左旗",
  "鄂尔多斯": "鄂尔多斯",
  "临河": "临河",
  "锡林浩特": "锡林浩特",
  "呼伦贝尔": "呼伦贝尔",
  "乌兰浩特": "乌兰浩特",
  "包头": "包头",
  "赤峰": "赤峰",
  "江西": "江西",
  "南昌": "南昌",
  "上饶": "上饶",
  "抚州": "抚州",
  "宜春": "宜春",
  "鹰潭": "鹰潭",
  "赣州": "赣州",
  "景德镇": "景德镇",
  "萍乡": "萍乡",
  "新余": "新余",
  "九江": "九江",
  "吉安": "吉安",
  "湖北": "湖北",
  "武汉": "武汉",
  "黄冈": "黄冈",
  "荆州": "荆州",
  "宜昌": "宜昌",
  "恩施": "恩施",
  "十堰": "十堰",
  "神农架": "神农架",
  "随州": "随州",
  "荆门": "荆门",
  "天门": "天门",
  "仙桃": "仙桃",
  "潜江": "潜江",
  "襄樊": "襄樊",
  "鄂州": "鄂州",
  "孝感": "孝感",
  "黄石": "黄石",
  "咸宁": "咸宁",
  "四川": "四川",
  "成都": "成都",
  "自贡": "自贡",
  "绵阳": "绵阳",
  "南充": "南充",
  "达州": "达州",
  "遂宁": "遂宁",
  "广安": "广安",
  "巴中": "巴中",
  "泸州": "泸州",
  "宜宾": "宜宾",
  "内江": "内江",
  "资阳": "资阳",
  "乐山": "乐山",
  "眉山": "眉山",
  "凉山": "凉山",
  "雅安": "雅安",
  "甘孜": "甘孜",
  "阿坝": "阿坝",
  "德阳": "德阳",
  "广元": "广元",
  "攀枝花": "攀枝花",
  "宁夏": "宁夏",
  "银川": "银川",
  "中卫": "中卫",
  "固原": "固原",
  "石嘴山": "石嘴山",
  "吴忠": "吴忠",
  "青海省": "青海省",
  "西宁": "西宁",
  "黄南": "黄南",
  "海北": "海北",
  "果洛": "果洛",
  "玉树": "玉树",
  "海西": "海西",
  "海东": "海东",
  "海南": "海南",
  "山东": "山东",
  "济南": "济南",
  "潍坊": "潍坊",
  "临沂": "临沂",
  "菏泽": "菏泽",
  "滨州": "滨州",
  "东营": "东营",
  "威海": "威海",
  "枣庄": "枣庄",
  "日照": "日照",
  "莱芜": "莱芜",
  "聊城": "聊城",
  "青岛": "青岛",
  "淄博": "淄博",
  "德州": "德州",
  "烟台": "烟台",
  "济宁": "济宁",
  "泰安": "泰安",
  "陕西省": "陕西省",
  "西安": "西安",
  "延安": "延安",
  "榆林": "榆林",
  "铜川": "铜川",
  "商洛": "商洛",
  "安康": "安康",
  "汉中": "汉中",
  "宝鸡": "宝鸡",
  "咸阳": "咸阳",
  "渭南": "渭南",
  "山西": "山西",
  "太原": "太原",
  "临汾": "临汾",
  "运城": "运城",
  "朔州": "朔州",
  "忻州": "忻州",
  "长治": "长治",
  "大同": "大同",
  "阳泉": "阳泉",
  "晋中": "晋中",
  "晋城": "晋城",
  "吕梁": "吕梁",
  "新疆": "新疆",
  "乌鲁木齐": "乌鲁木齐",
  "石河子": "石河子",
  "昌吉": "昌吉",
  "吐鲁番": "吐鲁番",
  "库尔勒": "库尔勒",
  "阿拉尔": "阿拉尔",
  "阿克苏": "阿克苏",
  "喀什": "喀什",
  "伊宁": "伊宁",
  "塔城": "塔城",
  "哈密": "哈密",
  "和田": "和田",
  "阿勒泰": "阿勒泰",
  "阿图什": "阿图什",
  "博乐": "博乐",
  "克拉玛依": "克拉玛依",
  "西藏": "西藏",
  "拉萨": "拉萨",
  "山南": "山南",
  "阿里": "阿里",
  "昌都": "昌都",
  "那曲": "那曲",
  "日喀则": "日喀则",
  "林芝": "林芝",
  "台湾": "台湾",
  "台北县": "台北县",
  "高雄": "高雄",
  "台中": "台中",
  "海南省": "海南省",
  "海口": "海口",
  "三亚": "三亚",
  "东方": "东方",
  "临高": "临高",
  "澄迈": "澄迈",
  "儋州": "儋州",
  "昌江": "昌江",
  "白沙": "白沙",
  "琼中": "琼中",
  "定安": "定安",
  "屯昌": "屯昌",
  "琼海": "琼海",
  "文昌": "文昌",
  "保亭": "保亭",
  "万宁": "万宁",
  "陵水": "陵水",
  "西沙": "西沙",
  "南沙岛": "南沙岛",
  "乐东": "乐东",
  "五指山": "五指山",
  "琼山": "琼山",
  "湖南": "湖南",
  "长沙": "长沙",
  "株洲": "株洲",
  "衡阳": "衡阳",
  "郴州": "郴州",
  "常德": "常德",
  "益阳": "益阳",
  "娄底": "娄底",
  "邵阳": "邵阳",
  "岳阳": "岳阳",
  "张家界": "张家界",
  "怀化": "怀化",
  "黔阳": "黔阳",
  "永州": "永州",
  "吉首": "吉首",
  "湘潭": "湘潭",
  "江苏": "江苏",
  "南京": "南京",
  "镇江": "镇江",
  "苏州": "苏州",
  "南通": "南通",
  "扬州": "扬州",
  "宿迁": "宿迁",
  "徐州": "徐州",
  "淮安": "淮安",
  "连云港": "连云港",
  "常州": "常州",
  "泰州": "泰州",
  "无锡": "无锡",
  "盐城": "盐城",
  "黑龙江": "黑龙江",
  "哈尔滨": "哈尔滨",
  "牡丹江": "牡丹江",
  "佳木斯": "佳木斯",
  "绥化": "绥化",
  "黑河": "黑河",
  "双鸭山": "双鸭山",
  "伊春": "伊春",
  "大庆": "大庆",
  "七台河": "七台河",
  "鸡西": "鸡西",
  "鹤岗": "鹤岗",
  "齐齐哈尔": "齐齐哈尔",
  "大兴安岭": "大兴安岭",
  "吉林": "吉林",
  "长春": "长春",
  "延吉": "延吉",
  "四平": "四平",
  "白山": "白山",
  "白城": "白城",
  "辽源": "辽源",
  "松原": "松原",
  "通化": "通化",
  "辽宁": "辽宁",
  "沈阳": "沈阳",
  "鞍山": "鞍山",
  "抚顺": "抚顺",
  "本溪": "本溪",
  "丹东": "丹东",
  "葫芦岛": "葫芦岛",
  "营口": "营口",
  "阜新": "阜新",
  "辽阳": "辽阳",
  "铁岭": "铁岭",
  "盘锦": "盘锦",
  "大连": "大连",
  "锦州": "锦州",
  "卡片": "卡片",
  "心跳加载": "心跳加载",
  "霓虹雨": "霓虹雨",
  "微信公众号": "微信公众号",
  "无法连接到服务器": "无法连接到服务器",
  "系统提示": "系统提示",
  "重新登录": "重新登录",
  " 秒": " 秒",
  "人员信息": "人员信息",
  "管理页": "管理页",
  "博客编辑": "博客编辑",
  "标签管理": "标签管理",
  "随笔管理": "随笔管理",
  "随笔编辑": "随笔编辑",
  "相册管理": "相册管理",
  "游戏管理": "游戏管理",
  "影视管理": "影视管理",
  "美食管理": "美食管理",
  "音乐管理": "音乐管理",
  "壁纸管理": "壁纸管理",
  "字典管理": "字典管理",
  "更新日志管理": "更新日志管理",
  "博客展示": "博客展示",
  "博客分类详情": "博客分类详情",
  "博客标签详情": "博客标签详情",
  "相册详情": "相册详情",
  "svg集合": "svg集合",
  "svg图片": "svg图片",
  "普通3x3动态魔方": "普通3x3动态魔方",
  "图片旋转魔方": "图片旋转魔方",
  "可旋转展示6面图片的魔方": "可旋转展示6面图片的魔方",
  "3d菜单": "3d菜单",
  "卡片翻转": "卡片翻转",
  "心型加载": "心型加载",
  "堆叠卡": "堆叠卡",
  "旋转菜单": "旋转菜单",
  "视差": "视差",
  "倾斜轮播": "倾斜轮播",
  "自由拖拽": "自由拖拽",
  "甘特图": "甘特图",
  "富文本编辑器": "富文本编辑器",
  "连线绘图": "连线绘图",
  "宫格": "宫格",
  "可选宫格": "可选宫格",
  "canvas动画": "canvas动画",
  "运动": "运动",
  "本站": "本站",
  "日志": "日志",
  "原材仓收料": "原材仓收料",
  "库存看板": "库存看板",
  "车间看板": "车间看板",
  "IQC看板": "IQC看板",
  "线体看板": "线体看板",
  "备料出库": "备料出库",
  "缺料看板": "缺料看板",
  "SPC均值极差图看板": "SPC均值极差图看板",
  "SPC均值方差图看板": "SPC均值方差图看板",
  "SPC PCHART图看板": "SPC PCHART图看板",
  "MSD看板": "MSD看板",
  "单据数量": "单据数量",
  "待检验数": "待检验数",
  "已检验数": "已检验数",
  "加急数": "加急数",
  "批退数量": "批退数量",
  "批退率": "批退率",
  "采购单号": "采购单号",
  "入库单号": "入库单号",
  "检验单号": "检验单号",
  "检验状态": "检验状态",
  "供应商名称": "供应商名称",
  "物料料号": "物料料号",
  "物料规格": "物料规格",
  "送检时间": "送检时间",
  "送检数量": "送检数量",
  "批退原因": "批退原因",
  "送检中": "送检中",
  "送检完成": "送检完成",
  "检验中": "检验中",
  "检验完成": "检验完成",
  "已审核": "已审核",
  "免验": "免验",
  "批退": "批退",
  "已二次送检": "已二次送检",
  "请输入线体名称.": "请输入线体名称.",
  "工单信息": "工单信息",
  "当前生产进度": "当前生产进度",
  "工单号": "工单号",
  "机型": "机型",
  "首件完成": "首件完成",
  "标准节拍": "标准节拍",
  "最快节拍": "最快节拍",
  "制令单号": "制令单号",
  "面别": "面别",
  "预计完工": "预计完工",
  "平均节拍": "平均节拍",
  "最慢节拍": "最慢节拍",
  "良率": "良率",
  "直通率": "直通率",
  "含氧量": "含氧量",
  "机器": "机器",
  "停机类别": "停机类别",
  "位置": "位置",
  "停机原因": "停机原因",
  "停机端口": "停机端口",
  "备料出库看板": "备料出库看板",
  "待备料单数": "待备料单数",
  "已备料单数": "已备料单数",
  "总备料单数": "总备料单数",
  "线体": "线体",
  "出库单号": "出库单号",
  "出库类别": "出库类别",
  "物料编码": "物料编码",
  "物料名": "物料名",
  "计划数": "计划数",
  "已备数": "已备数",
  "总数": "总数",
  "在库数": "在库数",
  "烘烤中": "烘烤中",
  "开封数量": "开封数量",
  "物料SN": "物料SN",
  "烘烤开始时间": "烘烤开始时间",
  "烘烤温度": "烘烤温度",
  "烘烤时长": "烘烤时长",
  "暴露开始时间": "暴露开始时间",
  "单次暴露时长": "单次暴露时长",
  "累计暴露时长": "累计暴露时长",
  "物料批次": "物料批次",
  "物料数量": "物料数量",
  "过期时间": "过期时间",
  "MSD烘烤明细": "MSD烘烤明细",
  "即将开封超时信息": "即将开封超时信息",
  "列表": "列表",
  "原材料仓收料看板": "原材料仓收料看板",
  "物料名称": "物料名称",
  "单据状态": "单据状态",
  "允许数量": "允许数量",
  "入库数": "入库数",
  "上海开铭智能科技有限公司": "上海开铭智能科技有限公司",
  "付俊凯": "付俊凯",
  "研发部": "研发部",
  "开立": "开立",
  "操作中": "操作中",
  "已关结": "已关结",
  "强制关结": "强制关结",
  "机器序号": "机器序号",
  "紧急程度": "紧急程度",
  "料台": "料台",
  "料站": "料站",
  "剩余时间": "剩余时间",
  "物料状态": "物料状态",
  "用量": "用量",
  "唯一条码": "唯一条码",
  "剩余数量": "剩余数量",
  "备用唯一码": "备用唯一码",
  "备用数量": "备用数量",
  "料站剩余数量": "料站剩余数量",
  "消耗数量": "消耗数量",
  "错误数量": "错误数量",
  "最后扫料人": "最后扫料人",
  "切换时间": "切换时间",
  "紧急": "紧急",
  "SPC PCHART管制看板": "SPC PCHART管制看板",
  "产品料号": "产品料号",
  "工序": "工序",
  "测试项": "测试项",
  "子组大小": "子组大小",
  "不良率": "不良率",
  "中线": "中线",
  "控制上限": "控制上限",
  "控制下限": "控制下限",
  "不良率控制图": "不良率控制图",
  "虚线 ": "虚线 ",
  "请输入SPC测试项名称.": "请输入SPC测试项名称.",
  "异常代码：": "异常代码：",
  "SPC XBAR管制看板": "SPC XBAR管制看板",
  "规格项": "规格项",
  "规格上限": "规格上限",
  "规格中限": "规格中限",
  "规格下限": "规格下限",
  "样本大小": "样本大小",
  "控制上限A区": "控制上限A区",
  "控制下限A区": "控制下限A区",
  "控制上限B区": "控制上限B区",
  "控制下限B区": "控制下限B区",
  "控制上限C区": "控制上限C区",
  "控制下限C区": "控制下限C区",
  "均值": "均值",
  "方差": "方差",
  "均值图": "均值图",
  "均数": "均数",
  "方差图": "方差图",
  "极差": "极差",
  "极差图": "极差图",
  "仓库容量": "仓库容量",
  "已用容量": "已用容量",
  "可用容量": "可用容量",
  "仓库利用率": "仓库利用率",
  "货架编号": "货架编号",
  "货架容量": "货架容量",
  "存放率": "存放率",
  "当日总产量": "当日总产量",
  "当日打点数": "当日打点数",
  "车间平均抛料率": "车间平均抛料率",
  "车间平均稼动率": "车间平均稼动率",
  "生产产品": "生产产品",
  "工单": "工单",
  "制令单": "制令单",
  "计划生产数量": "计划生产数量",
  "产出数量": "产出数量",
  "A线": "A线",
  "错误的请求": "错误的请求",
  "未授权，请重新登录": "未授权，请重新登录",
  "拒绝访问": "拒绝访问",
  "请求错误，未找到该资源": "请求错误，未找到该资源",
  "请求方法未允许": "请求方法未允许",
  "请求超时": "请求超时",
  "服务器端出错": "服务器端出错",
  "网络未实现": "网络未实现",
  "网络错误": "网络错误",
  "服务不可用": "服务不可用",
  "网络超时": "网络超时",
  "http版本不支持该请求": "http版本不支持该请求",
  "无法连接到服务器！": "无法连接到服务器！",
  "登录失效，需要重新登录": "登录失效，需要重新登录",
  "账户未绑定角色，请联系管理员绑定角色": "账户未绑定角色，请联系管理员绑定角色",
  "该用户未注册，请联系管理员注册用户": "该用户未注册，请联系管理员注册用户",
  "code 无法获取对应第三方平台用户": "code 无法获取对应第三方平台用户",
  "该账户未关联员工，请联系管理员做关联": "该账户未关联员工，请联系管理员做关联",
  "账号已无效": "账号已无效",
  "账号未找到": "账号未找到",
  "已收数量": "已收数量",
  "待入数量": "待入数量",
  "感觉脑子不是自己的": "感觉脑子不是自己的",
  "待办": "待办",
  "负责模块": "负责模块",
  "修改密码": "修改密码",
  "退出登录": "退出登录"
}